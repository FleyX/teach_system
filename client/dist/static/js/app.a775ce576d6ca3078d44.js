webpackJsonp([1],{"/gdM":function(t,e){},"/jK3":function(t,e){},"0OQr":function(t,e){},"0bco":function(t,e){},1980:function(t,e){},"23Ww":function(t,e){},"35zS":function(t,e){},"3R+y":function(t,e){},"4Lmz":function(t,e){},"551H":function(t,e){},"5FpU":function(t,e){},"6zVs":function(t,e){},"72JN":function(t,e){},"73Vq":function(t,e){},"74Z8":function(t,e){},"7kgF":function(t,e){},"8JiB":function(t,e){},"8VKd":function(t,e){},"8fAe":function(t,e){},"8o11":function(t,e){},"9MZ7":function(t,e){},"ABc/":function(t,e){},CFTQ:function(t,e){},D7kN:function(t,e){},F6I6:function(t,e){},H8BN:function(t,e){},HbVb:function(t,e){},"I/8y":function(t,e){},K3g1:function(t,e){},KlWE:function(t,e){},LEdF:function(t,e){},M4a6:function(t,e){},MHJX:function(t,e){},MQZG:function(t,e){},"N+5n":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",{staticStyle:{height:"100%"}})],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App",beforeCreate:function(){}},s,!1,function(t){n("Unk2")},null,null).exports,r=n("/ocq"),o={name:"publicMain",beforeCreate:function(){window.type="public"}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("div",{staticClass:"stars"}),this._v(" "),e("div",{staticClass:"stars1"}),this._v(" "),e("div",{staticClass:"stars2"}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")(o,l,!1,function(t){n("35zS")},null,null).exports,u=n("mvHQ"),d=n.n(u),m={name:"LoginForm",data:function(){return{welcomeWord:"hello,welcome back!",code:"",password:"",isRememberMe:!1,imgData:"",authcode:"",authcodeKey:"",resetPass:""}},beforeCreate:function(){var t=this,e=this.$route.path.split("/"),n=void 0;null!=(n="admin_login"==e[e.length-1]?getUserInfo():getClientUserInfo())&&this.$alert("您已登录，请勿重复操作","警告",{type:"warning",showClose:!1}).then(function(e){3==n.u_type?t.$router.replace("/client"):t.$router.replace("/admin")})},created:function(){this.resetPass=this.$route.path+"/reset_pass",void 0!=this.$route.query.redirect&&(this.resetPass+="?redirect="+this.$route.query.redirect),this.getImg()},methods:{submit:function(){var t=this;$http.post("/public/login",{code:this.code,password:this.password,authcode:this.authcode,authcodeKey:this.authcodeKey,isRememberMe:this.isRememberMe}).then(function(e){t.do(e)})},do:function(t){var e=this;if(0===t.code)vm.$message({message:t.info,type:"error",center:!0});else if(1===t.code){vm.$message({message:t.info,type:"success",center:!0,duration:1e3});this.$route.query;3===t.data.u_type?(localStorage.setItem("clientToken",t.data.token),window.clientToken=t.data.token,localStorage.setItem("clientUserInfo",d()(t.data))):(localStorage.setItem("token",t.data.token),window.token=t.data.token,localStorage.setItem("userInfo",d()(t.data)));var n="";n=3===t.data.u_type?"/client":"/admin",setTimeout(function(){console.log(n),e.$router.replace(n)},500)}},getImg:function(){var t=this;$http.get("/public/authcode").then(function(e){t.imgData=e.data,t.authcodeKey=e.key})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-item-vcenter all-item-hcenter",attrs:{id:"app"}},[n("div",{staticStyle:{position:"relative",top:"-30px"}},[n("div",{staticClass:"welcome-word"},[t._v(t._s(t.welcomeWord))]),t._v(" "),n("el-form",{staticStyle:{width:"350px",margin:"0 auto","margin-top":"60px"}},[n("el-form-item",[n("el-tooltip",{attrs:{effect:"dark",content:"学生输入学号，教师输入工号",placement:"right"}},[n("el-input",{attrs:{placeholder:"学工号",clearable:""},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),t._v(" "),n("el-form-item",[n("el-tooltip",{attrs:{effect:"dark",content:"6-20位数字字母组合",placement:"right"}},[n("el-input",{attrs:{type:"password",placeholder:"密码",clearable:""},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-between",staticStyle:{"margin-bottom":"22px"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",placeholder:"验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.authcode,callback:function(e){t.authcode=e},expression:"authcode"}}),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"点击切换",placement:"top"}},[n("img",{staticStyle:{width:"37%",height:"40px","border-radius":"5%"},attrs:{src:"data:image/png;base64,"+t.imgData},on:{click:function(e){return t.getImg()}}})])],1),t._v(" "),n("div",{staticClass:"all-item-between",staticStyle:{"margin-bottom":"22px","line-height":"19px"}},[n("el-checkbox",{staticStyle:{color:"white"},attrs:{label:"记住我"},model:{value:t.isRememberMe,callback:function(e){t.isRememberMe=e},expression:"isRememberMe"}}),t._v(" "),n("router-link",{staticStyle:{display:"flex"},attrs:{to:t.resetPass}},[n("span",{staticClass:"forget-pass"},[t._v("忘记密码？")])])],1),t._v(" "),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("登录")])],1)],1)])},staticRenderFns:[]};var h=n("VU/8")(m,p,!1,function(t){n("VpQ7")},"data-v-f139c1b2",null).exports,f={name:"",data:function(){return{welcomeWord:"重置密码",code:"",pass:"",repass:"",authCode:"",text:"获取验证码",countdown:0,returnUrl:".",timer:null}},created:function(){void 0!=this.$route.query.redirect&&(this.returnUrl+="?redirect="+this.$route.query.redirect)},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{submit:function(){var t=this;$http.post("/public/reset-password",{code:this.code,mail:this.email,pass:this.pass,repass:this.repass,authCode:this.authCode}).then(function(e){0===e.code?alertMessage(e.info,"error"):(alertMessage(e.info,"success"),t.$router.replace(t.returnUrl))})},getAuthCode:function(){var t=this;this.countdown>0||$http.post("/public/mail-auth-code",{code:this.code,mail:this.email}).then(function(e){0===e.code?alertMessage(e.info,"error"):(alertMessage(e.info,"success"),t.countdown=60,t.text=t.countdown+" 后重试",t.timer=setInterval(function(){--t.countdown<=0?(t.text="获取验证码",clearInterval(t.timer)):t.text=t.countdown+" 后重试"},1e3))})}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-item-vcenter all-item-hcenter",attrs:{id:"app"}},[n("div",{staticStyle:{position:"relative",top:"-30px","text-align":"center"}},[n("div",{staticClass:"welcome-word"},[t._v(t._s(t.welcomeWord))]),t._v(" "),n("router-link",{staticClass:"return",attrs:{to:t.returnUrl,replace:""}},[t._v("返回登录")]),t._v(" "),n("el-form",{staticStyle:{width:"350px",margin:"0 auto","margin-top":"30px"}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"账号",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{type:"password",placeholder:"新密码",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{type:"password",placeholder:"重复新密码",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.repass,callback:function(e){t.repass=e},expression:"repass"}})],1),t._v(" "),n("div",{staticClass:"all-item-between",staticStyle:{"margin-bottom":"22px"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",placeholder:"验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.authCode,callback:function(e){t.authCode=e},expression:"authCode"}}),t._v(" "),n("el-button",{staticStyle:{width:"37%"},attrs:{type:"warning",disabled:t.countdown>0},on:{click:function(e){return t.getAuthCode()}}},[t._v(t._s(t.text))])],1),t._v(" "),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)])},staticRenderFns:[]};var v=n("VU/8")(f,_,!1,function(t){n("8VKd")},"data-v-04e6482c",null).exports,g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("span",{staticStyle:{"padding-top":"30%",display:"block"}},[this._v("本系统github地址："),e("a",{attrs:{target:"_blank",href:this.github}},[this._v(this._s(this.github))])]),e("br"),this._v(" "),e("span",[this._v("由于本人能力和时间的问题，本系统为1.0版本，必然存在许多的bug，欢迎大家进行错误反馈。")])])},staticRenderFns:[]};var b=n("VU/8")({name:"about",data:function(){return{github:"https://github.com/FleyX/teach_system"}}},g,!1,function(t){n("23Ww")},"data-v-b87f8318",null).exports,w={path:"/public",component:c,children:[{path:"admin_login",component:h},{path:"client_login",component:h},{path:"admin_login/reset_pass",component:v},{path:"client_login/reset_pass",component:v}]},x={name:"top",data:function(){return{systemName:"教学辅助系统",userInfo:{},courses:[],currentCourseName:"我的课程",currentCourse:-1,activeIndex:"-1",isPersonInfoDropdown:!1}},watch:{$route:function(t,e){this.updateChecked(t.path)}},created:function(){var t=this;bus.$on("updateUserInfo",function(e){t.getInfo()}),bus.$on("updateCourse",function(e){console.log("updateCourse"),t.getCourse()}),this.getInfo(),this.getCourse();var e=setInterval(function(){t.courses.length>0&&(clearInterval(e),t.updateChecked(t.$route.path))},300)},methods:{handleSelect:function(t){console.log(t),t.startsWith("course")?(this.currentCourse=parseInt(t.split(":")[1]),this.currentCourseName=this.courses[this.currentCourse].c_name,this.$router.push("/admin/course/"+this.courses[this.currentCourse].c_id+"/statistics"),this.$refs.topMenu.activeIndex="statistics"):this.$router.push("/admin/course/"+this.courses[this.currentCourse].c_id+"/"+t)},handleCommand:function(t){switch(t){case"info":this.$router.push("/admin/person_space");break;case"manage":this.$router.push("/admin/manage/course_manage");break;case"logout":clearInfo(),this.$router.replace("/public/admin_login")}this.currentCourseName="我的课程",this.currentCourse=-1,this.activeIndex="asdfasdf"},getCourse:function(){var t=this;$http.get("/user/"+getUserInfo().u_id+"/course").then(function(e){t.courses=e})},getInfo:function(){var t=this;$http.get("/user/"+getUserInfo().u_id).then(function(e){t.userInfo=e,localStorage.setItem("userInfo",d()(e))})},updateChecked:function(t){var e=t.split("/");if(!t.startsWith("/admin/course/"))return this.currentCourse=-1,this.currentCourseName="我的课程",void("/admin"==t?bus.$emit("leftOrder",{order:"admin",defaultIndex:"overview"}):bus.$emit("leftOrder",{order:e[2],defaultIndex:e.slice(2).join("/")}));this.currentCourse=this.courses.findIndex(function(t){return t.c_id.toString()==e[3]}),this.currentCourseName=this.courses[this.currentCourse].c_name,this.activeIndex=e[4],bus.$emit("leftOrder",{order:e[4],defaultIndex:e.slice(4).join("/")})}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-item-between",attrs:{id:"top"}},[n("div",{staticClass:"left all-item-between"},[n("div",{staticClass:"start all-item-vcenter"},[n("router-link",{attrs:{to:"/admin"}},[n("span",{staticStyle:{display:"inline-flex","margin-left":"30px",color:"white"}},[t._v(t._s(t.systemName))])])],1),t._v(" "),n("el-menu",{ref:"topMenu",staticClass:"el-menu-demo",staticStyle:{"border-bottom":"0px","margin-left":"14px"},attrs:{"default-active":t.activeIndex,"background-color":"#23262e","text-color":"white","active-text-color":"green",mode:"horizontal"},on:{select:t.handleSelect}},[t.courses.length>0?n("el-submenu",{attrs:{index:"course"}},[n("template",{slot:"title"},[n("span",{staticClass:"course-name"},[t._v(t._s(t.currentCourseName))])]),t._v(" "),t._l(t.courses,function(e,a){return n("el-menu-item",{key:e.c_id,attrs:{index:"course:"+a,disabled:a==t.currentCourse}},[t._v(t._s(e.c_name))])})],2):n("el-menu-item",{attrs:{index:"none",disabled:""}},[t._v("无课程")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"base"}},[t._v("课程")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"announcement"}},[t._v("公告")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"student"}},[t._v("学生")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"question_bank"}},[t._v("题库")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"test"}},[t._v("测试")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"Q_A"}},[t._v("答疑")]),t._v(" "),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.currentCourse>=0,expression:"currentCourse>=0"}],attrs:{index:"statistics"}},[t._v("统计")])],1)],1),t._v(" "),n("div",{staticClass:"right"},[n("el-dropdown",{on:{command:t.handleCommand,"visible-change":function(e){return t.isPersonInfoDropdown=e}}},[n("div",{staticClass:"all-item-vcenter pointer"},[n("img",{staticClass:"head-img",attrs:{src:t.userInfo.icon}}),t._v(" "),n("span",{staticStyle:{color:"white"}},[t._v("\n          "+t._s(t.userInfo.u_name)+"\n          "),n("i",{class:t.isPersonInfoDropdown?"el-icon-caret-top":"el-icon-caret-bottom",staticStyle:{"font-size":"16px"}})])]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"info"}},[t._v("\n          我的\n        ")]),t._v(" "),0==t.userInfo.u_type?n("el-dropdown-item",{attrs:{command:"manage"}},[t._v("\n          管理\n        ")]):t._e(),t._v(" "),n("el-dropdown-item",{attrs:{divided:"",command:"logout"}},[t._v("\n          退出\n        ")])],1)],1)],1)])},staticRenderFns:[]};var k={person_space:[{index:"person_space",name:"个人资料"},{index:"person_space/safe",name:"安全设置",data:[{index:"person_space/safe/change_email",name:"修改邮箱"},{index:"person_space/safe/change_password",name:"修改密码"}]}],manage:[{index:"manage/course_manage",name:"课程管理"},{index:"manage/user_manage",name:"用户管理"}],student:[{index:"student",name:"学生概览"},{index:"student/add",name:"录入学生",data:[{index:"student/add_one",name:"单个录入"},{index:"student/add_many",name:"批量录入"}]}],announcement:[{index:"announcement",name:"公告概览"},{index:"announcement/add",name:"新增公告"}],base:[{index:"base",name:"课程简介"},{index:"base/teacher_intro",name:"教师简介"},{index:"base/first_course",name:"先导课程"},{index:"base/teach_plan",name:"教学计划"},{index:"base/exam_type",name:"考试方式"},{index:"base/reference_book",name:"参考书目"},{index:"base/section",name:"章节管理"},{index:"base/courseware_manage",name:"课件管理"}],question_bank:[{index:"question_bank",name:"题库总览"},{index:"add",name:"录入题目",data:[{index:"question_bank/add/choice_question",name:"选择题"},{index:"question_bank/add/gap_filling",name:"填空题"},{index:"question_bank/add/program",name:"编程题"}]},{index:"question_bank/question_group_overview",name:"题组总览"},{index:"question_bank/organize_question",name:"组织题目"}],test:[{index:"test",name:"测试总览"},{index:"test/add_homework",name:"发布作业"},{index:"test/add_exam",name:"发布考试"}],statistics:[{index:"statistics",name:"总览"}],Q_A:[{index:"Q_A",name:"当前答疑"}],admin:[{index:"overview",name:"总览"}]},C={name:"left",data:function(){return{activeIndex:"0",menuData:[],order:""}},created:function(){var t=this;bus.$on("leftOrder",function(e){t.activeIndex=e.defaultIndex,t.order=e.order,t.menuData=k[e.order]})},methods:{handleClick:function(t){"person_space"==this.order||"manage"==this.order?this.$router.push("/admin/"+t):"manage"==this.order?this.$router.push("/admin/"+t):this.$router.push("/admin/course/"+this.$route.params.c_id+"/"+t)}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{id:"left-ul","default-active":t.activeIndex,"background-color":"#393d49","text-color":"white","active-text-color":"green"},on:{select:t.handleClick}},[t._l(t.menuData,function(e){return[e.hasOwnProperty("data")?n("el-submenu",{key:e.index,attrs:{index:e.index}},[n("template",{slot:"title"},[n("span",[t._v(t._s(e.name))])]),t._v(" "),t._l(e.data,function(e){return[e.hasOwnProperty("data")?n("el-submenu",{key:e.index,attrs:{index:e.index}},[n("template",{slot:"title"},[n("span",[t._v(t._s(e.name))])]),t._v(" "),t._l(e.data,function(e){return n("el-menu-item",{key:e.index,attrs:{index:e.index}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("\n                "+t._s(e.name)+"\n              ")])])})],2):n("el-menu-item",{key:e.index,attrs:{index:e.index}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("\n              "+t._s(e.name)+"\n            ")])])]})],2):n("el-menu-item",{key:e.index,attrs:{index:e.index}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])]})],2)],1)},staticRenderFns:[]};var D={name:"Admin",components:{top:n("VU/8")(x,y,!1,function(t){n("it6H")},"data-v-1835f288",null).exports,left:n("VU/8")(C,$,!1,function(t){n("Vjyw")},"data-v-94d05b42",null).exports},data:function(){return{timer:null}},beforeCreate:function(){window.type="admin"},created:function(){document.title="教学辅助系统后台管理",this.checkTime(),this.timer=setInterval(this.checkTime,6e4)},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{checkTime:function(){var t=this;$http.get("/public/system_time").then(function(e){Math.abs(Date.now()-e)>12e4&&t.$alert("当前本地时间与服务器时间差距超过两分钟，请检查","提示",{confirmButtonText:"我知道了"})})}}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"admin-main"},[e("top",{staticClass:"admin-top"}),this._v(" "),e("div",{staticClass:"admin-bottom"},[e("left",{staticClass:"admin-left"}),this._v(" "),e("div",{staticClass:"admin-right"},[e("div",{staticClass:"admin-content"},[e("transition",{attrs:{name:"el-fade-in-linear",mode:"out-in"}},[e("router-view",{staticStyle:{padding:"10px",height:"calc(100% - 20px)"}})],1)],1),this._v(" "),this._m(0)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"admin-bottom2 all-item-vcenter all-item-hcenter"},[e("span",[this._v("版权所有，侵权必究")])])}]};var q=n("VU/8")(D,S,!1,function(t){n("UtTI")},null,null).exports,I={name:"EditCourse",data:function(){return{form:{},selectValve:"",allTeacher:{},currentAction:"edit"}},methods:{addTeacher:function(t){for(var e in this.selectValve="",this.form.teacher)if(this.form.teacher[e].u_id==t)return void this.$message({message:"本课程已添加该教师",type:"error"});this.form.teacher.push({u_id:t,u_name:this.allTeacher[t]})},deleteTeacher:function(t){for(var e=0;e<this.form.teacher.length;e++)this.form.teacher[e].u_id==t&&this.form.teacher.splice(e,1)},edit:function(t){this.getAllTeacher(),this.currentAction="edit",this.form=JSON.parse(t)},add:function(){this.getAllTeacher(),this.form={code:"",c_name:"",teacher:[]},this.currentAction="add"},submit:function(){var t=this;""!=this.form.code&&""!=this.form.c_name?"add"==this.currentAction?$http.post("/course",this.form).then(function(e){t.form.c_id=e.c_id,t.form.create_time=e.create_time,alertMessage("操作成功","success"),t.$emit("closeDialog",d()(t.form)),t.form.teacher=[]}):$http.put("/course/"+this.form.c_id,this.form).then(function(e){alertMessage("操作成功","success"),t.$emit("closeDialog",d()(t.form)),t.form.teacher=[]}):alertMessage("课程名或课程代码为空","error")},getAllTeacher:function(){var t=this;$http.get("/user/teachers/all").then(function(e){e.forEach(function(e){t.$set(t.allTeacher,e.u_id,e.u_name)})})},close:function(){this.form.teacher=[],this.$emit("closeDialog")}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"课程名称"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.form.c_name,callback:function(e){t.$set(t.form,"c_name",e)},expression:"form.c_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"课程代码"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"授课教师"}},[t._l(t.form.teacher,function(e){return n("el-tag",{key:e.u_id,attrs:{closable:""},on:{close:function(n){return t.deleteTeacher(e.u_id)}}},[t._v(t._s(e.u_name))])}),t._v(" "),n("el-select",{staticStyle:{width:"130px"},attrs:{filterable:"",placeholder:"新增(可搜索)"},on:{change:t.addTeacher},model:{value:t.selectValve,callback:function(e){t.selectValve=e},expression:"selectValve"}},t._l(t.allTeacher,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})}),1)],2)],1),t._v(" "),n("div",{staticClass:"action all-item-around"},[n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.close()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var T={name:"CourseManage",components:{editCourse:n("VU/8")(I,E,!1,function(t){n("Z8b4")},"data-v-408ceec4",null).exports},data:function(){return{isDialogShow:!1,dialogTitle:"编辑课程",currentAction:"edit",currentCourse:"",currentPage:1,size:0,pageSize:10,tableData:[],sort:{column:null,sort:null}}},computed:{showData:function(){var t=this,e=this.tableData.slice(0);null!=this.sort.column&&e.sort(function(e,n){var a=e[t.sort.column],s=n[t.sort.column];return"ascending"==t.sort.sort?a-s:s-a});var n=this.pageSize*(this.currentPage-1);return e.slice(n,n+this.pageSize)}},created:function(){this.getCourse()},methods:{sortChange:function(t){this.sort.column=t.prop,this.sort.sort=t.order},refresh:function(){this.tableData.splice(0),this.getCourse()},deleteCourse:function(t){var e=this;alertConfirm("确认删除该课程及所有相关数据？").then(function(){$http.delete("/course/"+t.c_id).then(function(n){e.tableData.splice(e.tableData.indexOf(t),1),e.size--,bus.$emit("updateCourse","sdf"),alertMessage("删除成功","success")})})},editCourse:function(t){this.dialogTitle="编辑课程",this.currentCourse=d()(t),this.currentAction="edit",this.isDialogShow=!0},addCourse:function(){this.dialogTitle="新增课程",this.currentAction="add",this.isDialogShow=!0},doAction:function(t){this.$nextTick(function(){var t=this.$refs["edit-course"];switch(this.currentAction){case"edit":t.edit(this.currentCourse);break;case"add":t.add()}})},getCourse:function(){var t=this;$http.get("/course").then(function(e){t.size=e.length,t.tableData=e})},closeDialog:function(t){if(void 0!=t)if(t=JSON.parse(t),bus.$emit("updateCourse"),"edit"==this.currentAction){var e=this.tableData.findIndex(function(e){return e.c_id=t.c_id});this.$set(this.tableData,e,t)}else this.tableData.push(t),this.size++;this.isDialogShow=!1}}},U={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"app",staticStyle:{padding:"10px"}},[a("div",{staticClass:"top",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addCourse()}}},[e._v("新增课程")])],1),e._v(" "),a("el-table",{attrs:{data:e.showData},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"c_name",label:"课程名","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"课程代码","show-overflow-tooltip":"",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"任课教师","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.teacher,function(n,s){return a("span",{key:n.u_id},[e._v("\n          "+e._s(s==t.row.teacher.length-1?n.u_name:n.u_name+", ")+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"custom","show-overflow-tooltip":"",formatter:function(e){return t.$moment(e.create_time).format("YYYY-MM-DD")}}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteCourse(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.editCourse(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"all-item-hcenter"},[a("el-pagination",{attrs:{layout:"prev,pager,next",background:"",total:e.size,"current-page":e.currentPage},on:{"current-change":function(e){return t.currentPage=e}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isDialogShow,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isDialogShow=t},open:function(t){return e.doAction()}}},[a("edit-course",{ref:"edit-course",on:{closeDialog:e.closeDialog}})],1)],1)},staticRenderFns:[]};var M=n("VU/8")(T,U,!1,function(t){n("8fAe")},"data-v-c374fb3e",null).exports,z=n("woOf"),F=n.n(z),R={name:"EditUser",data:function(){return{form:{},currentAction:"edit"}},methods:{edit:function(t){this.currentAction="edit",(t=JSON.parse(t)).u_type=t.u_type.toString(),t.password="",t.repeatPassword="",this.form=t},add:function(){this.form={u_name:"",u_type:"",code:"",password:""},this.currentAction="add"},submit:function(){var t=this;"add"==this.currentAction?$http.post("/user",this.form).then(function(e){t.form.u_id=parseInt(e),t.$message({message:"操作成功！",type:"success"}),t.$emit("closeDialog",t.form)}):$http.put("/user/change_person_info",this.form).then(function(e){t.$message({message:"操作成功！",type:"success"}),t.$emit("closeDialog",t.form)})},close:function(){this.$emit("closeDialog")}}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.form.u_name,callback:function(e){t.$set(t.form,"u_name",e)},expression:"form.u_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户类型"}},[n("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:t.form.u_type,callback:function(e){t.$set(t.form,"u_type",e)},expression:"form.u_type"}},[n("el-option",{attrs:{label:"管理员",value:"0"}}),t._v(" "),n("el-option",{attrs:{label:"教师",value:"1"}}),t._v(" "),n("el-option",{attrs:{label:"学生",value:"3"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"学工号"}},[n("el-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.currentAction,expression:"currentAction=='edit'"}],attrs:{label:"邮箱"}},[n("el-input",{model:{value:t.form.email_addr,callback:function(e){t.$set(t.form,"email_addr",e)},expression:"form.email_addr"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{placeholder:"edit"!=t.currentAction?"默认密码":"不修改请勿填写"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),n("div",{staticClass:"action all-item-around"},[n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.close()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var j={name:"UserManage",components:{EditUser:n("VU/8")(R,N,!1,function(t){n("pyEn")},"data-v-1d49d2c8",null).exports},data:function(){return{dialogTitle:"编辑用户",isDialogShow:!1,currentAction:"edit",currentUser:{},search:{filed:"",content:""},param:{start:0,orderBy:"u_id",sort:"desc",count:!0,u_type:[]},userFilter:[{text:"管理员",value:0},{text:"教师",value:1},{text:"学生",value:3}],size:0,pageSize:10,tableData:[],multipleSelection:[]}},created:function(){this.getUser(this.param)},methods:{changePage:function(t){this.param.start=this.pageSize*(t-1),this.getUser(this.param)},resetParam:function(){this.param.start=0,this.param.count=!0,this.size=0,this.tableData=[],this.multipleSelection=[]},refresh:function(){this.resetParam(),this.getUser(this.param)},doSearch:function(){this.resetParam();var t=F()(this.param);t.search=this.search,this.getUser(t)},editUser:function(t){this.currentAction="edit",this.currentUser=d()(t),this.dialogTitle="编辑用户",this.isDialogShow=!0},addUser:function(){this.currentAction="add",this.dialogTitle="新增用户",this.isDialogShow=!0},deleteAll:function(){var t=this;this.$confirm("确认删除所有选中用户及所有相关数据？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(e){e.u_id!=getUserInfo().u_id?$http.delete("/user/"+e.u_id).then(function(n){var a=t.tableData.indexOf(e);t.tableData.splice(a,1),t.$notify({title:"成功",message:"删除 "+e.u_name+" 成功",type:"success"})}):t.$notify({title:"错误",message:"不能删除自己",type:"error"})})})},deleteOne:function(t){var e=this;this.$confirm("确认删除该用户及所有相关数据？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){$http.delete("/user/"+t.u_id).then(function(n){var a=e.tableData.indexOf(t);e.tableData.splice(a,1),e.$message({message:"删除成功",type:"success"})})})},doAction:function(){this.$nextTick(function(){var t=this.$refs["edit-user"];switch(this.currentAction){case"edit":t.edit(this.currentUser);break;case"add":t.add()}})},getUser:function(t){var e=this;$http.get("/user?data="+Base64.encodeURI(d()(t))).then(function(t){1==e.param.count?(e.param.count=!1,e.size=t.count,e.param.start+=t.data.length,e.tableData=t.data):(e.tableData=t,e.param.start+=t.length)})},handleSelectionChange:function(t){this.multipleSelection=t},closeDialog:function(t){void 0!=t&&("edit"==this.currentAction?(this.tableData.forEach(function(e){e.u_id==t.u_id&&(e.u_name=t.u_name,e.u_type=parseInt(t.u_type),e.code=t.code,e.email_addr=t.email_addr)}),t.u_id==getUserInfo().u_id&&bus.$emit("updateUserInfo")):this.tableData.push({u_id:t.u_id,u_name:t.u_name,u_type:parseInt(t.u_type),code:t.code,email_addr:t.email_addr})),this.isDialogShow=!1},filterUserType:function(t,e,n){return e.u_type==t},filterChange:function(t){for(var e in console.log(t),t)this.param.u_type=t[e];this.resetParam(),this.getUser(this.param)}}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",staticStyle:{padding:"10px"}},[n("div",{staticClass:"top all-item-between all-item-vcenter"},[n("div",{staticStyle:{}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.search.content,callback:function(e){t.$set(t.search,"content",e)},expression:"search.content"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.search.filed,callback:function(e){t.$set(t.search,"filed",e)},expression:"search.filed"}},[n("el-option",{attrs:{label:"姓名",value:"u_name"}}),t._v(" "),n("el-option",{attrs:{label:"学工号",value:"code"}})],1),t._v(" "),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.doSearch},slot:"append"})],1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(e){return t.refresh()}}}),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteAll()}}},[t._v("批量删除")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addUser()}}},[t._v("新增用户")])],1)]),t._v(" "),n("el-table",{attrs:{data:t.tableData,size:"middle","max-height":"800px"},on:{"filter-change":t.filterChange,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55px"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"code",sortable:"",label:"学工号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",sortable:"",label:"姓名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_type",label:"用户类型",filters:t.userFilter,"filter-placement":"bottom-start"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.u_type?n("span",[t._v("管理员")]):"1"==e.row.u_type?n("span",[t._v("教师")]):n("span",[t._v("学生")])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"email_addr",label:"邮件地址"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteOne(e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.editUser(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-pagination",{attrs:{layout:"prev,pager,next",background:"",total:t.size},on:{"current-change":t.changePage}})],1),t._v(" "),n("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isDialogShow,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isDialogShow=e},open:function(e){return t.doAction()}}},[n("edit-user",{ref:"edit-user",on:{closeDialog:t.closeDialog}})],1)],1)},staticRenderFns:[]};var A=n("VU/8")(j,V,!1,function(t){n("pI2a")},"data-v-cc93ef04",null).exports,P={name:"TotalStatistic",data:function(){return{visitData:[],testData:{},onlineNum:"加载中"}},mounted:function(){this.getOnlineNum(),this.getVisitData(),this.getTestData()},methods:{getVisitData:function(){var t=this;$http.get("/user/statistics/login_time").then(function(e){t.visitData=e,t.createLoginTimeChart()})},getTestData:function(){var t=this;$http.get("/test/statistics/test_num").then(function(e){t.testData=e,t.createTestChart()})},getOnlineNum:function(){var t=this;$http.get("/user/statistics/online").then(function(e){return t.onlineNum=e})},createLoginTimeChart:function(){var t=new G2.Chart({container:"chart1",width:700,heigth:600,forceFit:!0});t.source(this.visitData,{key:{type:"cat",alias:"时间"},value:{alias:"人数",range:[0,1]}}),t.line().position("key*value"),t.point().position("key*value").size(4).shape("circle").style({stroke:"#fff",lineWidth:1}),t.render(),this.chart1=t},createTestChart:function(){var t=new G2.Chart({container:"test-chart",width:700,heigth:600,forceFit:!0});t.source(this.testData.data,{key:{type:"cat",alias:"时间"},value:{alias:"次数",range:[0,1]}}),t.line().position("key*value"),t.point().position("key*value").size(4).shape("circle").style({stroke:"#fff",lineWidth:1}),t.render(),this.chart2=t}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"当前在线用户"}},[t._v("\n      "+t._s(t.onlineNum)+"\n    ")]),t._v(" "),n("el-form-item",{attrs:{label:"用户上次登录时间"}},[n("div",{staticClass:"chart",attrs:{id:"chart1"}})]),t._v(" "),n("el-form-item",{attrs:{label:"测试数目"}},[n("span",[t._v("系统共进行："+t._s(t.testData.count)+"次测试")]),t._v(" "),n("h5",[t._v("最近7天测试情况")]),t._v(" "),n("div",{staticClass:"chart",attrs:{id:"test-chart"}})])],1)],1)},staticRenderFns:[]};var O=n("VU/8")(P,L,!1,function(t){n("eQLI")},"data-v-25de41e1",null).exports,Q={name:"PersonInfo",data:function(){return{personInfo:{},currentEdit:"",imgUrl:null,sex:"",choseFile:null}},created:function(){this.getInfo()},methods:{editIcon:function(){},getInfo:function(){var t=this;$http.get("/user/"+getUserInfo().u_id).then(function(e){switch(e.sex){case 0:e.sexInfo="男";break;case 1:e.sexInfo="女";break;case 2:e.sexInfo="未知"}t.personInfo=e})},choseImg:function(t){var e=t.target.files[0];console.log(e),e.size>2097152?this.$message({message:"文件大小不得超过2M",type:"warning"}):(this.choseFile=e,this.imgUrl=URL.createObjectURL(e))},submit:function(){var t=this;if("icon"===this.currentEdit){var e=new FormData;e.append("icon",this.choseFile),e.append("u_id",this.personInfo.u_id),$http.put("/user/change_simple_info",e,!0).then(function(e){t.editSuccess()})}else $http.put("/user/change_simple_info",{u_id:this.personInfo.u_id,sex:this.sex}).then(function(e){t.editSuccess()})},editSuccess:function(){bus.$emit("updateUserInfo"),this.getInfo(),this.$message({message:"修改成功",type:"success",center:!0}),this.currentEdit=""}}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"头像"}},["icon"==t.currentEdit?n("label",{staticClass:"upload-file all-item-vcenter all-item-hcenter pointer"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",accept:"image/*"},on:{change:t.choseImg}}),t._v(" "),t.imgUrl?n("img",{attrs:{src:t.imgUrl}}):n("i",{staticClass:"el-icon-plus"})]):[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击编辑",placement:"right"}},[n("img",{staticClass:"head-icon pointer",attrs:{src:t.personInfo.icon},on:{click:function(e){t.currentEdit="icon"}}})])]],2),t._v(" "),n("el-form-item",{attrs:{label:"性别"}},["sex"==t.currentEdit?n("el-select",{model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},[n("el-option",{attrs:{label:"男",value:"0"}}),t._v(" "),n("el-option",{attrs:{label:"女",value:"1"}})],1):[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击编辑",placement:"right"}},[n("span",{staticClass:"pointer",on:{click:function(e){t.currentEdit="sex"}}},[t._v(t._s(t.personInfo.sexInfo))])])]],2),t._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请到安全选项中修改",placement:"right"}},[n("span",[t._v(t._s(t.personInfo.email_addr))])])],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.currentEdit,expression:"currentEdit!=''"}],staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.currentEdit=""}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var H=n("VU/8")(Q,Y,!1,function(t){n("TFUh")},"data-v-4631c3a5",null).exports,G={data:function(){return{type:"",password:"",newEmail:"",newPassword:"",repeatNewPassword:""}},watch:{"$route.params.type":function(t,e){this.password="",this.type=t}},created:function(){this.type=this.$route.params.type},methods:{submit:function(){var t=this;"change_email"==this.type?$http.put("/user/change_email",{password:this.password,newEmail:this.newEmail}).then(function(e){t.success()}):"change_password"==this.type&&$http.put("/user/change_password",{password:this.password,newPassword:this.newPassword,repeatNewPassword:this.repeatNewPassword}).then(function(e){t.success()})},success:function(){this.$message({message:"修改成功",type:"success",center:!0}),this.password="",this.newEmail="",this.newPassword="",this.repeatNewPassword=""}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},["change_email"==t.type?n("div",{staticClass:"change-email"},[n("el-form",{attrs:{"label-width":"60px"}},[n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"新邮箱"}},[n("el-input",{attrs:{type:"email"},model:{value:t.newEmail,callback:function(e){t.newEmail=e},expression:"newEmail"}})],1)],1)],1):t._e(),t._v(" "),"change_password"==t.type?n("div",{staticClass:"change-password"},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"新密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"重复新密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.repeatNewPassword,callback:function(e){t.repeatNewPassword=e},expression:"repeatNewPassword"}})],1)],1)],1):t._e(),t._v(" "),n("div",{staticClass:"action all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)])},staticRenderFns:[]};var W=n("VU/8")(G,B,!1,function(t){n("gita")},"data-v-b4cb0fe0",null).exports,K={name:"CourseIntro",props:["column"],data:function(){return{info:"",c_id:""}},created:function(){this.c_id=this.$route.params.c_id,this.getCourseInfo()},methods:{getCourseInfo:function(){var t=this;$http.get("/course/base_info?c_id="+this.c_id+"&column="+this.column).then(function(e){t.info=e})},submit:function(){var t=this;$http.put("/course/"+this.c_id+"/base_info",{column:this.column,value:this.info}).then(function(e){t.$message({message:"修改成功",type:"success",center:!0})})}}},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("editor",{model:{value:t.info,callback:function(e){t.info=e},expression:"info"}}),t._v(" "),n("div",{staticClass:"all-item-hcenter",staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Z=n("VU/8")(K,J,!1,function(t){n("p1l4")},"data-v-06d9c9bf",null).exports,X={name:"CourseIntro",components:{BaseInput:Z}},tt={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"c_intro"}})},staticRenderFns:[]},et=n("VU/8")(X,tt,!1,null,null,null).exports,nt={name:"TeachPlan",components:{BaseInput:Z}},at={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"teach_plan"}})},staticRenderFns:[]},st=n("VU/8")(nt,at,!1,null,null,null).exports,it={name:"TeacherIntro",components:{BaseInput:Z}},rt={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"teacher_intro"}})},staticRenderFns:[]},ot=n("VU/8")(it,rt,!1,null,null,null).exports,lt={name:"FirstCourse",components:{BaseInput:Z}},ct={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"first_course"}})},staticRenderFns:[]},ut=n("VU/8")(lt,ct,!1,null,null,null).exports,dt={name:"ExamType",components:{BaseInput:Z}},mt={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"exam_type"}})},staticRenderFns:[]},pt=n("VU/8")(dt,mt,!1,null,null,null).exports,ht={name:"ReferenceBook",components:{BaseInput:Z}},ft={render:function(){var t=this.$createElement;return(this._self._c||t)("base-input",{attrs:{column:"reference_book"}})},staticRenderFns:[]},_t=n("VU/8")(ht,ft,!1,null,null,null).exports,vt={name:"Section",data:function(){return{defaultProps:{children:"children",label:"label"},c_id:"",tree:[],filterText:"",currentAction:"",currentNode:"",isDialogShow:!1,newNodeValue:""}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},created:function(){this.c_id=this.$route.params.c_id,this.getSectionTree()},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getSectionTree:function(){var t=this;$http.get("/course/"+this.c_id+"/knowledge_point_tree").then(function(e){e.children.sort(function(t,e){return t>e}),t.tree.push(e)})},remove:function(t,e){var n="确定要删除整个章节吗？",a="/section/"+e.id;3==e.level&&(n="删除该知识点吗？",a="/knowledge_point/"+e.id);alertConfirm(n).then(function(){$http.delete(a).then(function(n){alertMessage("删除成功","success");var a=t.parent.data.children;a.splice(a.indexOf(e),1)})})},append:function(t,e){this.currentNode=e,this.newNodeValue="",1==t.level?this.currentAction="section":2==t.level&&(this.currentAction="knowledgePoint"),this.isDialogShow=!0},submit:function(){if(0!=this.newNodeValue.trim().length){var t="",e={};"section"==this.currentAction?(t="/section",e.c_id=this.currentNode.id,e.s_name=this.newNodeValue):(t="/knowledge_point",e.s_id=this.currentNode.id,e.content=this.newNodeValue);var n=this;$http.post(t,e).then(function(t){alertMessage("新增成功","success"),n.isDialogShow=!1,void 0==n.currentNode.children&&n.$set(n.currentNode,"children",[]),n.currentNode.children.push({id:t,label:n.newNodeValue,level:n.currentNode.level+1})})}else alertMessage("请勿为空","error")}}},gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"action all-item-between all-item-vcenter"},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"搜索"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),n("el-tree",{ref:"tree",attrs:{data:t.tree,props:t.defaultProps,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,s=e.data;return n("div",{},[n("span",[t._v(t._s(a.label))]),t._v(" "),s.level<3?n("i",{staticClass:"el-icon-circle-plus primary",on:{click:function(e){return e.stopPropagation(),t.append(a,s)}}}):t._e(),t._v(" "),s.level>1&&(void 0==s.children||0==s.children.length)?n("i",{staticClass:"el-icon-remove warning",on:{click:function(e){return e.stopPropagation(),t.remove(a,s)}}}):t._e()])}}])}),t._v(" "),n("el-dialog",{attrs:{visible:t.isDialogShow,title:"section"==t.currentAction?"新增章节":"新增知识点"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("el-form",{attrs:{"label-width":"90px"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"section"==t.currentAction?"章节名":"知识点名"}},[n("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.newNodeValue,callback:function(e){t.newNodeValue=e},expression:"newNodeValue"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.isDialogShow=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var bt=n("VU/8")(vt,gt,!1,function(t){n("PaPP")},"data-v-37e58606",null).exports,wt={name:"CoursewareManage",data:function(){return{tableData:[],isDialogShow:!1,c_id:"",files:[],uploadUrl:"",headers:{}}},created:function(){this.c_id=this.$route.params.c_id,this.uploadUrl=axios.defaults.baseURL+"/course/"+this.c_id+"/courseware",this.$set(this.headers,"Authorization",getToken()),this.getTableData()},methods:{formatter:function(t,e){return this.$moment.unix(t.create_time/1e3).format("YYYY-MM-DD HH:mm")},getTableData:function(){var t=this;$http.get("/course/"+this.c_id+"/courseware").then(function(e){t.tableData=e})},deleteOne:function(t){var e=this,n=this;alertConfirm("确认删除？").then(function(){$http.delete("/course/"+e.c_id+"/courseware/"+t.cw_id).then(function(e){alertMessage("删除成功","success"),n.tableData.splice(n.tableData.indexOf(t),1)})})},checkFileName:function(t){return t.name.length>50?(alertMessage(t.name+" 文件名超过50字符","error"),!1):-1!=this.tableData.findIndex(function(e){return e.cw_name===t.name})?(alertMessage(t.name+" 文件重复","error"),!1):void 0},uploadSuccess:function(t,e,n){var a=this;t.forEach(function(t){return a.tableData.push(t)})}}},xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.isDialogShow=!0}}},[t._v("上传课件")]),t._v(" "),n("el-table",{staticClass:"table",attrs:{data:t.tableData,"default-sort":{prop:"cw_name"}}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"cw_name",sortable:"",label:"文件名",width:"400px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"上传时间",formatter:t.formatter}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"warning",attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteOne(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"上传课件",visible:t.isDialogShow},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("el-upload",{attrs:{drag:"",action:t.uploadUrl,multiple:"",headers:t.headers,"before-upload":t.checkFileName,"on-success":t.uploadSuccess}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或\n        "),n("em",[t._v("点击选择")]),t._v("(支持多文件上传)\n      ")])])],1)],1)},staticRenderFns:[]};var yt=n("VU/8")(wt,xt,!1,function(t){n("0bco")},"data-v-937b2a58",null).exports,kt={name:"AnnouncementOverView",data:function(){return{param:{start:0,column:"start_time",sort:"desc",count:!0,c_id:""},size:0,pageSize:10,tableData:[],content:"",isDialogShow:!1}},created:function(){this.param.c_id=this.$route.params.c_id,this.getTableData()},methods:{sortTable:function(t){var e=t.column,n=t.prop,a=t.order;null!=e&&(this.param.column=n,this.param.sort="ascending"==a?"asc":"desc",this.param.start=0,this.param.count=!0,this.size=0,this.tableData=[],this.getTableData())},changePage:function(t){this.param.start=this.pageSize*(t-1),this.getTableData()},getTableData:function(){var t=this;$http.get("/announcement?data="+Base64.encodeURI(d()(this.param))).then(function(e){1==t.param.count?(t.param.count=!1,t.size=e.count,t.tableData=e.data):t.tableData=e.data})},format1:function(t,e){return this.$moment.unix(t.start_time/1e3).format("YYYY-MM-DD HH:mm")},format2:function(t,e){return t.end_time-Date.now()>31536e7?"无":this.$moment.unix(t.end_time/1e3).format("YYYY-MM-DD HH:mm")},showContent:function(t){var e=this;$http.get("/announcement/"+t+"/content?a_id=").then(function(t){e.content=t,e.isDialogShow=!0})},switchOne:function(t){$http.put("/announcement/"+t.a_id+"/switch?action="+t.isClosed).then(function(e){t.end_time=e.end_time,t.start_time=e.start_time,t.isClosed=!t.isClosed,t.isClosed?alertMessage("关闭成功","success"):alertMessage("开启成功","success")})},deleteOne:function(t){var e=this;this.$confirm("确认删除该公告吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.delete("/announcement/"+t.a_id).then(function(n){e.$message({message:"删除成功",type:"success",center:!0}),e.tableData.splice(e.tableData.indexOf(t),1)})})}}},Ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-table",{attrs:{data:t.tableData,size:"middle","default-sort":{prop:"start_time",order:"descending"}},on:{"sort-change":t.sortTable}},[n("el-table-column",{attrs:{type:"index",width:"55px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"topic",sortable:"",label:"主题","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.showContent(e.row.a_id)}}},[t._v("点击查看")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"start_time",sortable:"",label:"开始时间",formatter:t.format1}}),t._v(" "),n("el-table-column",{attrs:{prop:"end_time",sortable:"",label:"结束时间",formatter:t.format2}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteOne(e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{class:{warning:!e.row.isClosed},attrs:{type:"text",size:"small"},on:{click:function(n){return t.switchOne(e.row)}}},[t._v(t._s(e.row.isClosed?"开启":"关闭"))])]}}])})],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-pagination",{attrs:{layout:"prev,pager,next",background:"",total:t.size},on:{"current-change":t.changePage}})],1),t._v(" "),n("el-dialog",{attrs:{title:"公告内容",visible:t.isDialogShow,width:"800px",center:""},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("div",{domProps:{innerHTML:t._s(t.content)}})])],1)},staticRenderFns:[]};var $t=n("VU/8")(kt,Ct,!1,function(t){n("jCx6")},"data-v-43718b90",null).exports,Dt={name:"AddAnnouncement",data:function(){return{title:"",time:"",isManualClose:!1,content:""}},methods:{submit:function(){var t={};t.c_id=this.$route.params.c_id,t.topic=this.title,t.content=this.content,this.isManualClose?(t.start_time="",t.end_time=""):(t.start_time=new Date(this.time[0]).getTime(),t.end_time=new Date(this.time[1]).getTime());var e=this;$http.post("/announcement",t).then(function(t){e.$message({message:"发布成功",type:"success",center:!0}),e.$router.replace("/admin/course/"+e.$route.params.c_id+"/announcement")})}}},St={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"70px"}},[n("el-form-item",{attrs:{label:"公告主题"}},[n("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"公告内容"}},[n("editor",{ref:"editor",model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.isManualClose,expression:"!isManualClose"}],attrs:{label:"起止时间"}},[n("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手动关闭"}},[n("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.isManualClose,callback:function(e){t.isManualClose=e},expression:"isManualClose"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var qt=n("VU/8")(Dt,St,!1,function(t){n("4Lmz")},"data-v-6e981dfe",null).exports,It={name:"ShowQuestion",props:["id","data","index"],data:function(){return{content:"",q_type:"",altertiveAnswer:[]}},computed:{realContent:function(){return this.content.replace(/\[blank_space\]/g,"<span class='blank'></span>")}},watch:{id:function(t){this.getQuestion()}},created:function(){void 0==this.data?this.getQuestion():(this.q_type=this.data.q_type,this.altertiveAnswer=JSON.parse(this.data.alternative_answer),this.content=this.data.q_description)},methods:{getQuestion:function(){var t=this;this.question={},$http.get("/question_library/"+this.id+"/show_question").then(function(e){t.content=e.q_description,t.q_type=e.q_type,t.altertiveAnswer=JSON.parse(e.alternative_answer)})}}},Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[void 0!=t.index?n("div",{staticClass:"left"},[t._v(t._s(t.index)+". ")]):t._e(),t._v(" "),n("div",{staticClass:"right"},[n("show-text",{staticClass:"content",attrs:{data:t.realContent}}),t._v(" "),t.q_type<3?n("div",{staticClass:"altertive-answer"},t._l(t.altertiveAnswer,function(e,a){return n("div",{key:a},[n("span",[t._v(t._s(String.fromCharCode(65+a))+".")]),t._v(" "),n("span",[t._v(t._s(e))])])}),0):t._e()],1)])},staticRenderFns:[]};var Tt=n("VU/8")(It,Et,!1,function(t){n("I/8y")},"data-v-49e9c832",null).exports,Ut={name:"QuestionTable",components:{ShowQuestion:Tt},props:["type"],data:function(){return{param:{c_id:"",searchContent:"",searchColumn:"q_simple_description",start:0,pageSize:10,q_type:[],count:!0,is_exam:2},isDialogShow:!1,current_ql_id:"",is_examFilter:[],questionTypes:[{text:"单选题",value:1},{text:"多选题",value:2},{text:"填空题",value:3},{text:"编程题",value:4}],size:0,tableData:[],multipleSelection:[]}},created:function(){this.param.c_id=this.$route.params.c_id,this.getQuestions()},methods:{deleteQuestion:function(t){this.$emit("deleteQuestion",t)},showQuestion:function(t){this.current_ql_id=t,this.isDialogShow=!0},getQuestionType:function(t,e){switch(t.q_type){case 1:return"单选题";case 2:return"多选题";case 3:return"填空题";case 4:return"编程题"}},getIsExam:function(t,e){return t.is_exam?"考试用":"作业用"},changePage:function(t){this.param.start=this.param.pageSize*(t-1),this.getQuestions()},resetParam:function(){this.param.start=0,this.param.count=!0,this.size=0,this.tableData=[],this.multipleSelection=[]},refresh:function(){this.resetParam(),this.getQuestions()},doSearch:function(){this.resetParam(),this.getQuestions()},getQuestions:function(){var t=this;$http.get("/question_library?data="+Base64.encodeURI(d()(this.param))).then(function(e){1==t.param.count?(t.param.count=!1,t.size=e.size,t.param.start+=e.data.length,t.tableData=e.data):(t.tableData=e,t.param.start+=e.length)})},handleSelectionChange:function(t){this.multipleSelection=t},filterChange:function(t){void 0!==t.q_type?(this.resetParam(),this.param.q_type=t.q_type,this.getQuestions()):void 0!==t.is_exam&&(this.resetParam(),2==t.is_exam.length||0==t.is_exam.length?this.param.is_exam=2:1==t.is_exam.length&&(this.param.is_exam=t.is_exam[0]),this.getQuestions())},resetMultipleSelection:function(){this.$refs.table.clearSelection()}}},Mt={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"app",staticStyle:{padding:"10px"}},[a("div",{staticClass:"top all-item-between all-item-vcenter"},[a("div",{staticStyle:{}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.param.searchContent,callback:function(t){e.$set(e.param,"searchContent",t)},expression:"param.searchContent"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"选择搜索项"},slot:"prepend",model:{value:e.param.searchColumn,callback:function(t){e.$set(e.param,"searchColumn",t)},expression:"param.searchColumn"}},[a("el-option",{attrs:{label:"题目简述",value:"q_simple_description"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.doSearch},slot:"append"})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}}),e._v(" "),2==e.type?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(){t.$emit("mult",t.multipleSelection)}}},[e._v("加入选中")]):e._e(),e._v(" "),1==e.type?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){return t.$emit("deleteQuestion",t.multipleSelection)}}},[e._v("批量删除")]):e._e()],1)]),e._v(" "),a("el-table",{ref:"table",attrs:{data:e.tableData,size:"middle"},on:{"filter-change":e.filterChange,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55px"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"50px"},attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"q_simple_description","show-overflow-tooltip":!0,label:"题目简述"}}),e._v(" "),a("el-table-column",{attrs:{label:"题目内容",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(n){return e.showQuestion(t.row.ql_id)}}},[e._v("查看题目")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"q_range",label:"难度",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{"column-key":"q_type",prop:"q_type",width:"150px",label:"题型","filtered-value":e.param.q_type,filters:e.questionTypes,"filter-placement":"bottom-start",formatter:e.getQuestionType}}),e._v(" "),a("el-table-column",{attrs:{"column-key":"is_exam",prop:"is_exam",width:"150px",label:"题目类别","filtered-value":e.is_examFilter,filters:[{text:"考试用",value:1},{text:"作业用",value:0}],"filter-placement":"bottom-start",formatter:e.getIsExam}}),e._v(" "),1==e.type?a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteQuestion([t.row])}}},[e._v("删除")])]}}],null,!1,4210757667)}):e._e()],1),e._v(" "),a("div",{staticClass:"all-item-hcenter"},[a("el-pagination",{attrs:{layout:"prev,pager,next",background:"",total:e.size},on:{"current-change":e.changePage}})],1),e._v(" "),a("el-dialog",{attrs:{"min-width":"400px",visible:e.isDialogShow,title:"预览"},on:{"update:visible":function(t){e.isDialogShow=t}}},[a("show-question",{attrs:{id:e.current_ql_id}})],1)],1)},staticRenderFns:[]};var zt=n("VU/8")(Ut,Mt,!1,function(t){n("VcG5")},"data-v-4079e706",null).exports,Ft={name:"Overview",components:{QuestionTable:zt},props:["type"],data:function(){return{isDialogShow:!1,current_ql_id:""}},methods:{deleteQuestion:function(t){var e=this.$refs.table,n="/course/"+this.$route.params.c_id+"/question_library?id="+t.map(function(t){return t.ql_id}).join(",");alertConfirm("确认删除该题目(未被使用才可删除)?").then(function(){$http.delete(n).then(function(n){if(0==n.length)alertMessage("删除成功","success");else{var a="";n.forEach(function(e){var n=t.findIndex(function(t){return t.ql_id==e});n>-1&&(a+=t[n].q_simple_description+" ")}),a+="删除失败",alertMessage(a,"error")}t.forEach(function(t){if(-1==n.findIndex(function(e){return e==t.ql_id})){var a=e.tableData.indexOf(t);e.tableData.splice(a,1)}})})})},deleteOne:function(t){},showQuestion:function(t){this.current_ql_id=t,this.isDialogShow=!0}}},Rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app",staticStyle:{padding:"10px"}},[e("question-table",{ref:"table",attrs:{type:"1"},on:{deleteQuestion:this.deleteQuestion}})],1)},staticRenderFns:[]};var Nt=n("VU/8")(Ft,Rt,!1,function(t){n("MQZG")},"data-v-58b4205e",null).exports,jt={name:"ChosePoint",data:function(){return{allPoints:[],optionValue:[],c_id:""}},created:function(){this.c_id=this.$route.params.c_id,this.getAllClass()},methods:{getAllClass:function(){var t=this;$http.get("/course/"+this.c_id+"/knowledge_point_tree").then(function(e){e.children&&(t.dealTreeData(e.children),t.allPoints=e.children)})},dealTreeData:function(t){var e=this;t.forEach(function(t){t.value=t.id,t.children&&e.dealTreeData(t.children)})},handleChange:function(t){if(2==t.length){var e=this.allPoints.find(function(e){return e.id==t[0]}).children.find(function(e){return e.id==t[1]});this.$emit("update",e)}this.optionValue=[]}}},Vt={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-cascader",{attrs:{options:t.allPoints},on:{change:t.handleChange},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}})},staticRenderFns:[]},At=n("VU/8")(jt,Vt,!1,null,null,null).exports,Pt={name:"AddChoiceQuestion",components:{ChosePoint:At},data:function(){return{form:{c_id:"",q_simple_description:"",q_description:"",tags:[],q_range:3,is_exam:!1},temp_answer:[],answerForm:{content:"",isRight:!1},isAddTagInput:!1,isAddingAnswer:!1}},created:function(){this.form.c_id=this.$route.params.c_id,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>"},methods:{addOneAnswer:function(){this.temp_answer.push({content:this.answerForm.content,isRight:this.answerForm.isRight}),this.answerForm.isRight=!1,this.answerForm.content=""},addTag:function(t){this.form.tags.findIndex(function(e){return e.kp_id==t.value})>-1?alertMessage("知识点重复","error"):(this.form.tags.push({kp_id:t.value,content:t.label}),this.isAddTagInput=!1)},submit:function(){var t=this;this.form.answer=[],this.form.alternative_answer=[],this.temp_answer.forEach(function(e,n){t.form.alternative_answer.push(e.content),e.isRight&&t.form.answer.push(n)}),0!=this.form.answer.length?(this.form.answer.length>1?this.form.q_type=2:this.form.q_type=1,$http.post("/question_library",this.form).then(function(t){alertMessage("提交成功","success")})):alertMessage("无备选项，无法提交","error")},clear:function(){this.form.alternative_answer=[],this.form.is_exam=!1,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>",this.form.q_range=3,this.form.q_simple_description="",this.form.tags=[],this.temp_answer=[]}}},Lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"100px","label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"题目描述"}},[n("el-input",{model:{value:t.form.q_simple_description,callback:function(e){t.$set(t.form,"q_simple_description",e)},expression:"form.q_simple_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"题目内容"}},[n("editor",{ref:"editor",model:{value:t.form.q_description,callback:function(e){t.$set(t.form,"q_description",e)},expression:"form.q_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"考试专用 "}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.is_exam,callback:function(e){t.$set(t.form,"is_exam",e)},expression:"form.is_exam"}})],1),t._v(" "),n("el-form-item",{staticClass:"all-item-vcenter",attrs:{label:"难易度"}},[n("el-rate",{staticClass:"el-rate",model:{value:t.form.q_range,callback:function(e){t.$set(t.form,"q_range",e)},expression:"form.q_range"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"知识点"}},[t._l(t.form.tags,function(e,a){return n("el-tag",{key:a,attrs:{closable:""},on:{close:function(e){return t.form.tags.splice(a,1)}}},[t._v("\n        "+t._s(e.content)+"\n      ")])}),t._v(" "),t.isAddTagInput?n("chose-point",{on:{close:function(e){t.isAddTagInput=!1},update:t.addTag}}):n("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddTagInput=!0}}},[t._v("+new tag")])],2),t._v(" "),n("el-form-item",{attrs:{label:"备选项"}},[t._l(t.temp_answer,function(e,a){return n("div",{key:a},[n("span",[t._v(t._s(String.fromCharCode(65+a))+".")]),t._v(" "),n("span",[t._v(t._s(e.content))]),t._v(" "),e.isRight?n("i",{staticClass:"el-icon-circle-check-outline"}):n("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.temp_answer.splice(a,1)}}},[t._v("删除")])],1)}),t._v(" "),t.isAddingAnswer?n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.answerForm.content,callback:function(e){t.$set(t.answerForm,"content",e)},expression:"answerForm.content"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"正确答案"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.answerForm.isRight,callback:function(e){t.$set(t.answerForm,"isRight",e)},expression:"answerForm.isRight"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addOneAnswer}},[t._v("确认")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.isAddingAnswer=!1}}},[t._v("取消")])],1):n("el-button",{attrs:{type:"text"},on:{click:function(e){t.isAddingAnswer=!0}}},[t._v("新增")])],2)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Ot=n("VU/8")(Pt,Lt,!1,function(t){n("y/rf")},"data-v-1ded5906",null).exports,Qt={name:"AddGapFilling",components:{ChosePoint:At},data:function(){return{form:{c_id:"",q_simple_description:"",q_description:"",tags:[],q_range:3,is_exam:!1,answer:[],q_type:3},answerForm:{content:""},blankCount:0,isAddTagInput:!1,isAddingAnswer:!1}},watch:{"form.q_description":function(t){this.blankCount=t.match(/\[blank_space\]/g).length}},created:function(){this.form.c_id=this.$route.params.c_id,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>"},methods:{addOneAnswer:function(){this.form.answer.length>=this.blankCount?alertMessage("答案数量超过限定数","warning"):(this.form.answer.push(this.answerForm.content),this.answerForm.content="")},addTag:function(t){this.form.tags.findIndex(function(e){return e.kp_id==t.value})>-1?alertMessage("知识点重复","error"):(this.form.tags.push({kp_id:t.value,content:t.label}),this.isAddTagInput=!1)},submit:function(){this.form.answer.length==this.blankCount?$http.post("/question_library",this.form).then(function(t){alertMessage("提交成功","success")}):alertMessage("预设答案数目与填空数不匹配","error")},clear:function(){this.form.is_exam=!1,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>",this.form.q_range=3,this.form.q_simple_description="",this.form.tags=[],this.form.answer=[]}}},Yt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"100px","label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"题目描述"}},[n("el-input",{model:{value:t.form.q_simple_description,callback:function(e){t.$set(t.form,"q_simple_description",e)},expression:"form.q_simple_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"题目内容"}},[n("editor",{model:{value:t.form.q_description,callback:function(e){t.$set(t.form,"q_description",e)},expression:"form.q_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"考试专用 "}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.is_exam,callback:function(e){t.$set(t.form,"is_exam",e)},expression:"form.is_exam"}})],1),t._v(" "),n("el-form-item",{staticClass:"all-item-vcenter",attrs:{label:"难易度"}},[n("el-rate",{staticClass:"el-rate",model:{value:t.form.q_range,callback:function(e){t.$set(t.form,"q_range",e)},expression:"form.q_range"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"知识点"}},[t._l(t.form.tags,function(e,a){return n("el-tag",{key:a,attrs:{closable:""},on:{close:function(e){return t.form.tags.splice(a,1)}}},[t._v("\n        "+t._s(e.content)+"\n      ")])}),t._v(" "),t.isAddTagInput?n("chose-point",{on:{close:function(e){t.isAddTagInput=!1},update:t.addTag}}):n("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddTagInput=!0}}},[t._v("+new tag")])],2),t._v(" "),n("el-form-item",{attrs:{label:"答案"}},[n("div",[t._v("共有"+t._s(t.blankCount)+"个答案")]),t._v(" "),t._l(t.form.answer,function(e,a){return n("div",{key:a},[n("span",[t._v(t._s(e))]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.form.answer.splice(a,1)}}},[t._v("删除")])],1)}),t._v(" "),t.isAddingAnswer?n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.answerForm.content,callback:function(e){t.$set(t.answerForm,"content",e)},expression:"answerForm.content"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addOneAnswer}},[t._v("确认")]),t._v(" "),n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.isAddingAnswer=!1}}},[t._v("取消")])],1):n("el-button",{attrs:{type:"text"},on:{click:function(e){t.isAddingAnswer=!0}}},[t._v("新增")])],2)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Ht=n("VU/8")(Qt,Yt,!1,function(t){n("0OQr")},"data-v-78c676c3",null).exports,Gt={name:"AddProgram",components:{ChosePoint:At},data:function(){return{form:{c_id:"",q_simple_description:"",q_description:"",tags:[],q_range:3,is_exam:!1,answer:[],q_type:4},tempAnswer:{input:"",output:""},isAddTagInput:!1}},created:function(){this.form.c_id=this.$route.params.c_id,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>"},methods:{addTag:function(t){this.form.tags.findIndex(function(e){return e.kp_id==t.value})>-1?alertMessage("知识点重复","error"):(this.form.tags.push({kp_id:t.value,content:t.label}),this.isAddTagInput=!1)},submit:function(){0!=this.form.answer.length?$http.post("/question_library",this.form).then(function(t){alertMessage("提交成功","success")}):alertMessage("请至少输入一组测试数据","error")},addCesi:function(){this.form.answer.push(this.tempAnswer),this.tempAnswer={input:"",output:""}},clear:function(){this.form.is_exam=!1,this.form.q_description="<p>使用[blank_space]表示此处需要留空</p>",this.form.q_range=3,this.form.q_simple_description="",this.form.tags=[],this.form.answer=[],this.tempAnswer={input:"",output:""}}}},Bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"100px","label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"题目描述"}},[n("el-input",{model:{value:t.form.q_simple_description,callback:function(e){t.$set(t.form,"q_simple_description",e)},expression:"form.q_simple_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"题目内容"}},[n("editor",{model:{value:t.form.q_description,callback:function(e){t.$set(t.form,"q_description",e)},expression:"form.q_description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"考试专用 "}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.is_exam,callback:function(e){t.$set(t.form,"is_exam",e)},expression:"form.is_exam"}})],1),t._v(" "),n("el-form-item",{staticClass:"all-item-vcenter",attrs:{label:"难易度"}},[n("el-rate",{staticClass:"el-rate",model:{value:t.form.q_range,callback:function(e){t.$set(t.form,"q_range",e)},expression:"form.q_range"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"知识点"}},[t._l(t.form.tags,function(e,a){return n("el-tag",{key:a,attrs:{closable:""},on:{close:function(e){return t.form.tags.splice(a,1)}}},[t._v("\n        "+t._s(e.content)+"\n      ")])}),t._v(" "),t.isAddTagInput?n("chose-point",{on:{close:function(e){t.isAddTagInput=!1},update:t.addTag}}):n("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddTagInput=!0}}},[t._v("+new tag")])],2),t._v(" "),n("el-form-item",{attrs:{label:"测试点"}},[n("div",t._l(t.form.answer,function(e,a){return n("el-popover",{key:a,attrs:{placement:"top",width:"300",trigger:"hover"}},[n("span",{staticStyle:{"font-weight":"600"}},[t._v("输入：")]),t._v(" "),n("pre",[t._v(t._s(e.input))]),t._v(" "),n("span",{staticStyle:{"font-weight":"600"}},[t._v("输出：")]),t._v(" "),n("pre",[t._v(t._s(e.output))]),t._v(" "),n("span",[t._v("点击删除")]),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small"},on:{click:function(e){return t.form.answer.splice(a,1)}},slot:"reference"},[t._v("测试点"+t._s(a+1))])],1)}),1),t._v(" "),n("div",{staticClass:"all-item-around"},[n("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",rows:5,placeholder:"输入"},model:{value:t.tempAnswer.input,callback:function(e){t.$set(t.tempAnswer,"input",e)},expression:"tempAnswer.input"}}),t._v(" "),n("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",rows:5,placeholder:"输出"},model:{value:t.tempAnswer.output,callback:function(e){t.$set(t.tempAnswer,"output",e)},expression:"tempAnswer.output"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addCesi}},[t._v("新增测试点")])],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Wt=n("VU/8")(Gt,Bt,!1,function(t){n("M4a6")},"data-v-5d5dff6c",null).exports,Kt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{attrs:{data:t.data}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ql_id",label:"题号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"q_simple_description",label:"描述"}}),t._v(" "),n("el-table-column",{attrs:{label:"分值"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{model:{value:e.row.score,callback:function(n){t.$set(e.row,"score",n)},expression:"scope.row.score"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.deleteOne(e.row)}}},[t._v("删除")])]}}])})],1)},staticRenderFns:[]};var Jt={components:{QuestionTable:zt,QuestionList:n("VU/8")({name:"QuestionList",props:["data"],methods:{deleteOne:function(t){this.data.splice(this.data.indexOf(t),1)}}},Kt,!1,function(t){n("lFDD")},null,null).exports},name:"OrganizeQuestion",computed:{num1:function(){var t=0;return this.form.onSystemQuestion[0].forEach(function(e){return t+=parseInt(e.score)}),t},num2:function(){var t=0;return this.form.onSystemQuestion[1].forEach(function(e){return t+=parseInt(e.score)}),t},num3:function(){var t=0;return this.form.onSystemQuestion[2].forEach(function(e){return t+=parseInt(e.score)}),t},num4:function(){var t=0;return this.form.onSystemQuestion[3].forEach(function(e){return t+=parseInt(e.score)}),t}},data:function(){return{currentStep:1,activeName:"",form:{qg_name:"",qg_type:"",demand:"",onSystemQuestion:[[],[],[],[]],difficulty:0}}},created:function(){var t=this;this.$watch(function(){return t.form.onSystemQuestion},this.cal)},methods:{nextStep:function(){1!=this.currentStep||""!=this.form.qg_name&&""!=this.form.qg_type?this.currentStep++:alertMessage("请勿留空","error")},addOnSystemQuestion:function(t){var e=this,n=[];t.forEach(function(t){t.q_type<=3?t.score=5:4==t.q_type&&(t.score=20),-1==e.form.onSystemQuestion[t.q_type-1].findIndex(function(e){return e.ql_id==t.ql_id})?e.form.onSystemQuestion[t.q_type-1].push(t):n.push(t.ql_id)}),n.length>0&&alertNotify("错误",n.join(",")+" 已存在","error"),this.$refs.questionTable.resetMultipleSelection()},cal:function(){for(var t={},e=0,n=0;n<this.form.onSystemQuestion.length;n++)for(var a=this.form.onSystemQuestion[n],s=0;s<a.length;s++)void 0==t[a[s].q_range]&&(t[a[s].q_range]=0),t[a[s].q_range]++,e++;var i=0;for(var r in t)i+=t[r]/e*r;console.log(i),this.form.difficulty=Math.round(10*i)/10},submit:function(){var t=this;this.form.score=this.num1+this.num2+this.num3+this.num4,$http.post("/course/"+this.$route.params.c_id+"/question_group",this.form).then(function(e){alertMessage("提交成功","success"),t.$router.replace("question_group_overview")})}}},Zt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-steps",{attrs:{active:t.currentStep,"align-center":""}},[n("el-step",{attrs:{title:"基本信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择题目"}}),t._v(" "),n("el-step",{attrs:{title:"信息总览"}})],1),t._v(" "),n("div",{staticClass:"all-item-hcenter content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentStep,expression:"currentStep==1"}],staticStyle:{width:"500px"}},[n("el-form",{attrs:{"label-width":"50px"}},[n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:t.form.qg_name,callback:function(e){t.$set(t.form,"qg_name",e)},expression:"form.qg_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"类别"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.qg_type,callback:function(e){t.$set(t.form,"qg_type",e)},expression:"form.qg_type"}},[n("el-option",{attrs:{label:"作业",value:"1"}}),t._v(" "),n("el-option",{attrs:{label:"考试",value:"2"}})],1)],1)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentStep,expression:"currentStep==2"}],staticStyle:{width:"100%"}},[n("question-table",{ref:"questionTable",attrs:{type:"2"},on:{mult:t.addOnSystemQuestion}}),t._v(" "),n("div",{staticClass:"show-selected"},[n("div",[t._v("总体难度："+t._s(this.form.difficulty))]),t._v(" "),n("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-collapse-item",{attrs:{title:"单选题，共："+t.form.onSystemQuestion[0].length,name:"1"}},[n("question-list",{attrs:{data:t.form.onSystemQuestion[0]}})],1),t._v(" "),n("el-collapse-item",{attrs:{title:"多选题，共："+t.form.onSystemQuestion[1].length,name:"2"}},[n("question-list",{attrs:{data:t.form.onSystemQuestion[1]}})],1),t._v(" "),n("el-collapse-item",{attrs:{title:"填空题，共："+t.form.onSystemQuestion[2].length,name:"3"}},[n("question-list",{attrs:{data:t.form.onSystemQuestion[2]}})],1),t._v(" "),n("el-collapse-item",{attrs:{title:"编程题，共："+t.form.onSystemQuestion[3].length,name:"4"}},[n("question-list",{attrs:{data:t.form.onSystemQuestion[3]}})],1)],1)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:3==t.currentStep,expression:"currentStep==3"}],staticStyle:{width:"600px"}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"描述"}},[t._v(t._s(t.form.qg_name))]),t._v(" "),n("el-form-item",{attrs:{label:"类别"}},[t._v(t._s(1==t.form.qg_type?"作业":"考试"))]),t._v(" "),n("el-form-item",{attrs:{label:"难度"}},[t._v(t._s(t.form.difficulty))]),t._v(" "),n("el-form-item",{attrs:{label:"题目"}},[n("div",[t._v("单选题："+t._s(t.form.onSystemQuestion[0].length)+"道， 共"+t._s(t.num1)+"分")]),t._v(" "),n("div",[t._v("多选题："+t._s(t.form.onSystemQuestion[1].length)+"道， 共"+t._s(t.num2)+"分")]),t._v(" "),n("div",[t._v("填空题："+t._s(t.form.onSystemQuestion[2].length)+"道， 共"+t._s(t.num3)+"分")]),t._v(" "),n("div",[t._v("编程题："+t._s(t.form.onSystemQuestion[3].length)+"道， 共"+t._s(t.num4)+"分")]),t._v(" "),n("div",[t._v("总计："+t._s(t.num1+t.num2+t.num3+t.num4)+"分")])])],1)],1)]),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[t.currentStep>1?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.currentStep--}}},[t._v("上一步")]):t._e(),t._v(" "),t.currentStep<3?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.nextStep}},[t._v("下一步")]):t._e(),t._v(" "),3==t.currentStep?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")]):t._e()],1)],1)},staticRenderFns:[]};var Xt=n("VU/8")(Jt,Zt,!1,function(t){n("O7Up")},"data-v-66d616c8",null).exports,te={name:"ShowQuestionGroup",props:["qg_id"],components:{ShowQuestion:Tt},data:function(){return{question:[{name:"单选题",data:[]},{name:"多选题",data:[]},{name:"填空题",data:[]},{name:"编程题",data:[]}]}},created:function(){this.$watch("qg_id",this.getData),this.getData()},methods:{getData:function(){var t=this;this.question.forEach(function(t){return t.data=[]}),$http.get("/question_group/"+this.qg_id+"/all_question").then(function(e){t.question[0].data=e.single,t.question[1].data=e.mult,t.question[2].data=e.gap,t.question[3].data=e.program})}}},ee={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-collapse",{attrs:{accordion:""}},t._l(t.question,function(e,a){return n("el-collapse-item",{key:a,attrs:{name:a,title:e.name+"共："+e.data.length}},t._l(e.data,function(t,e){return n("div",{key:t.ql_id},[n("show-question",{attrs:{data:t,index:e+1}})],1)}),0)}),1)},staticRenderFns:[]};var ne=n("VU/8")(te,ee,!1,function(t){n("D7kN")},null,null).exports,ae={name:"QuestionGroupTable",components:{ShowQuestionGroup:ne},props:["type","qg_type"],data:function(){return{param:{c_id:"",searchContent:"",searchColumn:"qg_name",start:0,pageSize:10,qg_type:"",count:!0},isDialogShow:!1,current_qg_id:"",size:0,tableData:[]}},created:function(){this.param.c_id=this.$route.params.c_id,this.param.qg_type=this.qg_type,this.getQuestionGroup()},methods:{showQuestionGroup:function(t){this.current_qg_id=t,this.isDialogShow=!0},getType:function(t,e){return 1==t.qg_type?"作业":"考试"},changePage:function(t){this.param.start=this.param.pageSize*(t-1),console.log(this.param.start),this.getQuestionGroup()},resetParam:function(){this.param.start=0,this.param.count=!0,this.size=0,this.tableData=[]},refresh:function(){this.resetParam(),this.getQuestionGroup()},doSearch:function(){this.resetParam(),this.getQuestionGroup()},getQuestionGroup:function(){var t=this;$http.get("/question_group?data="+Base64.encodeURI(d()(this.param))).then(function(e){1==t.param.count?(t.param.count=!1,t.size=e.size,t.tableData=e.data):t.tableData=e})},choseQuestionGroup:function(t){this.$emit("choseQuestionGroup",t)},deleteQuestionGroup:function(t){this.$emit("deleteQuestionGroup",t)}}},se={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"app",staticStyle:{padding:"10px"}},[a("div",{staticClass:"top all-item-between all-item-vcenter"},[a("div",{staticClass:"all-item-vcenter"},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"题组类别"},on:{change:function(){t.resetParam(),t.getQuestionGroup()}},model:{value:e.param.qg_type,callback:function(t){e.$set(e.param,"qg_type",t)},expression:"param.qg_type"}},[a("el-option",{attrs:{label:"作业题组",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"考试题组",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"不限",value:"3"}})],1),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.param.searchContent,callback:function(t){e.$set(e.param,"searchContent",t)},expression:"param.searchContent"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"搜索项"},slot:"prepend",model:{value:e.param.searchColumn,callback:function(t){e.$set(e.param,"searchColumn",t)},expression:"param.searchColumn"}},[a("el-option",{attrs:{label:"简述",value:"qg_name"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.doSearch},slot:"append"})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}})],1)]),e._v(" "),a("el-table",{ref:"table",attrs:{data:e.tableData,size:"middle"}},[a("el-table-column",{attrs:{type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qg_name","show-overflow-tooltip":!0,label:"简述"}}),e._v(" "),a("el-table-column",{attrs:{label:"预览",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(n){return e.showQuestionGroup(t.row.qg_id)}}},[e._v("点击预览")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"总分",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qg_type",label:"类别",width:"100px",formatter:e.getType}}),e._v(" "),a("el-table-column",{attrs:{prop:"difficulty",label:"难度",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.type?a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteQuestionGroup(t.row)}}},[e._v("删除")]):e._e(),e._v(" "),2==e.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.choseQuestionGroup(t.row)}}},[e._v("选择")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"all-item-hcenter"},[a("el-pagination",{attrs:{layout:"prev,pager,next",background:"",total:e.size},on:{"current-change":e.changePage}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.isDialogShow,title:"题组预览"},on:{"update:visible":function(t){e.isDialogShow=t}}},[a("show-question-group",{attrs:{qg_id:e.current_qg_id}})],1)],1)},staticRenderFns:[]};var ie=n("VU/8")(ae,se,!1,function(t){n("KlWE")},"data-v-b7ea03e4",null).exports,re={components:{QuestionGroupTable:ie},name:"QuestionGroupOverview",methods:{deleteOne:function(t){var e=this;alertConfirm("确认删除该题组吗？").then(function(){$http.delete("/course/"+e.$route.params.c_id+"/question_group/"+t.qg_id).then(function(n){alertMessage("删除成功","success");var a=e.$refs.table.tableData.indexOf(t);e.$refs.table.tableData.splice(a,1)})})}}},oe={render:function(){var t=this.$createElement;return(this._self._c||t)("question-group-table",{ref:"table",attrs:{type:"1"},on:{deleteQuestionGroup:this.deleteOne}})},staticRenderFns:[]};var le=n("VU/8")(re,oe,!1,function(t){n("qczJ")},null,null).exports,ce={name:"ScoreTable",props:["data","classList"],data:function(){return{tableData:[],options:[],type:"0"}},created:function(){var t=this;this.$watch("data",this.init),this.init(),bus.$on("testDetailRefresh",function(){t.type="0"})},methods:{init:function(){this.tableData=this.data,this.data.forEach(function(t){return null==t.score?t.score=-1:null}),this.options=this.class},showScore:function(t){return-1==t.score?"未提交":t.score},changeData:function(t){var e=this;"0"==t?this.tableData=this.data:(this.tableData=[],this.data.forEach(function(n){return n.class_id.toString()==t?e.tableData.push(n):null}))}}},ue={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-select",{on:{change:t.changeData},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-option",{attrs:{value:"0",label:"全部"}}),t._v(" "),t._l(t.options,function(t){return n("el-option",{key:t.class_id,attrs:{label:t.label,value:t.class_id}})})],2),t._v(" "),n("el-table",{attrs:{data:t.tableData,"max-height":"500"}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"code",label:"学号",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",label:"姓名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"class",label:"班级"}}),t._v(" "),n("el-table-column",{attrs:{width:"100px",label:"成绩",prop:"score",formatter:t.showScore,sortable:""}})],1)],1)},staticRenderFns:[]};var de={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-table",{attrs:{data:this.data,"max-height":"400"}},[e("el-table-column",{attrs:{type:"index",width:"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"q_simple_description",label:"题目名","show-overflow-tooltip":""}}),this._v(" "),e("el-table-column",{attrs:{prop:"count",label:"总数",width:"100px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightCount",label:"正确数",width:"100px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightPercent",label:"正确率(%)",width:"140px",sortable:"",formatter:function(t){return(100*t.rightPercent).toFixed(2)}}})],1)],1)},staticRenderFns:[]};var me={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-table",{attrs:{data:this.data,"max-height":"400"}},[e("el-table-column",{attrs:{type:"index",width:"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"content",label:"名称","show-overflow-tooltip":""}}),this._v(" "),e("el-table-column",{attrs:{prop:"count",label:"总数",sortable:"",width:"100px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightCount",label:"正确数",sortable:"",width:"100px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightPercent",label:"正确率(%)",width:"140px",sortable:"",formatter:function(t){return(100*t.rightPercent).toFixed(2)}}})],1)],1)},staticRenderFns:[]};var pe={name:"codeCheck",props:["data"],data:function(){return{type:"0",tableData:[],nameObj:{},currentCode:[],isDialogShow:!1}},computed:{questionType:function(){var t={};return this.data.dataList.forEach(function(e){void 0==t[e.ql_id]&&(t[e.ql_id]=e.q_simple_description)}),t}},created:function(){var t=this;this.$watch("data",this.init),this.init(),bus.$on("testDetailRefresh",function(){t.type="0"})},methods:{init:function(){var t=this;this.tableData=this.data.dataList;var e={};this.data.dataList.forEach(function(t){void 0==e[t.u_id]&&(e[t.u_id]=t.grade+"-"+t.class+"-"+t.u_name)}),this.data.dataList.forEach(function(n){n.u_full_name=e[n.u_id];var a=t.data.res[n.ql_id];if(void 0!=a&&void 0!=a[n.u_id]){var s=a[n.u_id];n.percent=parseInt(s.percent),n.other_name=e[s.u_id],n.other_id=s.u_id}else n.percent=0,n.other_name="",n.other_id=0})},compileInfo:function(t){var e=JSON.parse(t.sum);return null==e.err?"编译通过":e.data},typeChange:function(t){var e=parseInt(t);this.tableData=0==e?this.data.dataList:this.data.dataList.filter(function(t){return t.ql_id==e})},showCode:function(t){console.log(t.answer),this.currentCode=JSON.parse(t.answer),this.isDialogShow=!0}}},he={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-select",{attrs:{placeholder:"编程题名"},on:{change:t.typeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-option",{attrs:{value:"0",label:"全部"}}),t._v(" "),t._l(t.questionType,function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})],2),t._v(" "),n("el-table",{attrs:{data:t.tableData,"max-height":"500"}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{label:"编程题名",prop:"q_simple_description","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"提交人",prop:"u_full_name","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"编译信息","show-overflow-tooltip":"",formatter:t.compileInfo}}),t._v(" "),n("el-table-column",{attrs:{label:"得分",prop:"score"}}),t._v(" "),n("el-table-column",{attrs:{label:"重复率(%)",sortable:"",prop:"percent"}}),t._v(" "),n("el-table-column",{attrs:{label:"对方",prop:"other_name","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"代码"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.showCode(e.row)}}},[t._v("查看代码")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:t.currentCode[0],visible:t.isDialogShow,width:"50%"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("pre",[t._v(t._s(t.currentCode[1]))])])],1)},staticRenderFns:[]};var fe={name:"TestDetail",props:["data"],components:{ScoreTable:n("VU/8")(ce,ue,!1,function(t){n("sDdw")},null,null).exports,QuestionRightPercent:n("VU/8")({name:"QuestionRightPercent",props:["data"]},de,!1,function(t){n("tAiZ")},null,null).exports,KnowledgePointPercent:n("VU/8")({name:"KnowledgePontPercent",props:["data"]},me,!1,function(t){n("qhxj")},null,null).exports,CodeCheck:n("VU/8")(pe,he,!1,function(t){n("q61D")},null,null).exports},data:function(){return{isLoading:0,isScoreTableShow:!1,checkRepeat:{res:{},dataList:[]},detailData:{score:[],questionList:[],knowledgeList:[],updateTime:0}}},created:function(){var t=this;this.$watch("data",function(){t.isLoading=!0,t.checkRepeat={res:{},dataList:[]},t.detailData={score:[],questionList:[],knowledgeList:[],updateTime:0},t.getData(),t.codeCheck()}),this.codeCheck(),this.getData()},methods:{refresh:function(){this.isLoading=0,bus.$emit("testDetailRefresh"),this.getData("new"),this.codeCheck("new")},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"old";""!=this.data&&$http.get("/test/"+this.data.test_id+"/detail?type="+e).then(function(e){t.detailData=e,t.isLoading++})},codeCheck:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"old";""!=this.data&&$http.get("/test/"+this.data.test_id+"/code_check?type="+e).then(function(e){t.checkRepeat=e,t.isLoading++})}}},_e={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading<2,expression:"isLoading<2"}],staticClass:"app",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("更新时间")])]),t._v("\n      "+t._s(t.$moment(t.detailData.updateTime).format("HH:mm:ss"))+"\n      "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.refresh}},[t._v("刷新")])],2),t._v(" "),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v(t._s(1==t.data.t_type?"作业名":"考试名"))])]),t._v("\n      "+t._s(t.data.test_name)+"\n    ")],2),t._v(" "),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("结束时间")])]),t._v("\n      "+t._s(t.$moment(t.data.end_time).format("YYYY-MM-DD HH:mm"))+"\n    ")],2),t._v(" "),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("学生成绩")])]),t._v(" "),n("score-table",{attrs:{data:t.detailData.score,classList:t.detailData.class}})],2),t._v(" "),null!=t.data.qg_id?n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("编程题情况")])]),t._v(" "),n("code-check",{attrs:{data:t.checkRepeat}})],2):t._e(),t._v(" "),null!=t.data.qg_id?n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("答题统计")])]),t._v(" "),n("question-right-percent",{attrs:{data:t.detailData.questionList}})],2):t._e(),t._v(" "),null!=t.data.qg_id?n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"title"},[t._v("知识点统计")])]),t._v(" "),n("knowledge-point-percent",{attrs:{data:t.detailData.knowledgeList}})],2):t._e()],1)],1)},staticRenderFns:[]};var ve={name:"OVerView",components:{ShowQuestionGroup:ne,TestDetail:n("VU/8")(fe,_e,!1,function(t){n("iQnD")},"data-v-b884606e",null).exports},data:function(){return{size:0,pageSize:10,currentPage:1,c_id:"",t_type:"0",sort:{column:null,sort:null},tableData:[],currentQgId:"",isDialogShow:!1,action:"overview",currentTest:""}},computed:{showData:function(){var t=this,e=this.tableData.slice(0);"1"!=this.t_type&&"2"!=this.t_type||(e=e.filter(function(e){return e.t_type.toString()==t.t_type})),null!=this.sort.column&&e.sort(function(e,n){var a=e[t.sort.column],s=n[t.sort.column];return"ascending"==t.sort.sort?a-s:s-a});var n=this.pageSize*(this.currentPage-1);return e.slice(n,n+this.pageSize)}},created:function(){this.c_id=this.$route.params.c_id,this.getTableData()},methods:{sortChange:function(t){this.sort.column=t.prop,this.sort.sort=t.order},refresh:function(){this.tableData=[],this.size=0,this.getTableData()},showQuestionGroup:function(t){this.currentQgId=t,this.isDialogShow=!0},getTableData:function(){var t=this;$http.get("/test?c_id="+this.$route.params.c_id).then(function(e){t.size=e.length,t.tableData=e})},deleteOne:function(t){var e=this;alertConfirm("确认删除吗？").then(function(){$http.delete("/course/"+e.c_id+"/test/"+t.test_id).then(function(n){alertMessage("删除成功","success"),e.tableData.splice(e.tableData.indexOf(t),1),e.size--})})},testDetail:function(t){this.currentTest=t,this.action="detail"}}},ge={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"app"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"overview"==e.action,expression:"action=='overview'"}]},[a("div",{staticClass:"all-item-between"},[a("el-select",{attrs:{placeholder:"类别"},model:{value:e.t_type,callback:function(t){e.t_type=t},expression:"t_type"}},[a("el-option",{attrs:{label:"作业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"考试",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"全部",value:"0"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.refresh()}}})],1),e._v(" "),a("el-table",{attrs:{data:e.showData},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"test_name",label:"测试名称",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"题组"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.qg_id?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.showQuestionGroup(t.row.qg_id)}}},[e._v("查看")]):a("span",[e._v("智能组题")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"t_type",label:"类型",formatter:function(t){return 1==t.t_type?"作业":"考试"}}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"总分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time",sortable:"custom",label:"开始时间",formatter:function(e){return t.$moment.unix(e.start_time/1e3).format("YYYY-MM-DD HH:mm")}}}),e._v(" "),a("el-table-column",{attrs:{prop:"end_time",sortable:"custom",label:"结束时间",formatter:function(e){return t.$moment.unix(e.end_time/1e3).format("YYYY-MM-DD HH:mm")}}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"warning",attrs:{type:"text",size:"mini"},on:{click:function(n){return e.deleteOne(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.testDetail(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"all-item-hcenter"},[a("el-pagination",{attrs:{background:"",layout:"prev,pager,next",total:e.size},on:{"current-change":function(e){return t.currentPage=e}}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.isDialogShow,title:"题组详情"},on:{"update:visible":function(t){e.isDialogShow=t}}},[a("show-question-group",{attrs:{qg_id:e.currentQgId}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.action,expression:"action=='detail'"}]},[a("el-button",{attrs:{type:"text"},on:{click:function(){t.action="overview"}}},[e._v("返回")]),e._v(" "),a("test-detail",{attrs:{data:e.currentTest}})],1)])},staticRenderFns:[]};var be=n("VU/8")(ve,ge,!1,function(t){n("bzzG")},"data-v-5e49e0a6",null).exports,we={name:"ChoseHomeworkQuestion",components:{QuestionGroupTable:ie},data:function(){return{param:{sections:[],question:{single:{num:"5",score:"5"},mult:{num:"3",score:"5"},gap:{num:"4",score:"5"},program:{num:"2",score:"20"}},allScore:0},type:"",qg_data:"",sectionData:[]}},watch:{qg_data:function(t){this.update()}},computed:{allScore:function(){var t=0;for(var e in this.param.question)t+=parseInt(this.param.question[e].num)*parseInt(this.param.question[e].score);return this.param.allScore=t,t}},created:function(){this.c_id=this.$route.params.c_id,this.getSectionData()},methods:{getSectionData:function(){var t=this;$http.get("/course/"+this.c_id+"/section").then(function(e){t.sectionData=e})},typeChange:function(t){this.$emit("questionChange",null)},update:function(){var t=void 0;t="1"==this.type?this.qg_data:this.param,this.$emit("questionChange",{type:this.type,data:t})}}},xe={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择出题方式"}},[a("el-select",{on:{change:e.typeChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"选择题组",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"智能组题",value:"2"}})],1)],1),e._v(" "),"1"==e.type?a("div",[a("div",[e._v("当前选中："+e._s(e.qg_data.qg_name))]),e._v(" "),a("question-group-table",{attrs:{type:"2"},on:{choseQuestionGroup:function(e){return t.qg_data=e}}})],1):e._e(),e._v(" "),"2"==e.type?a("form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"作业范围"}},[a("el-transfer",{attrs:{props:{key:"s_id",label:"s_name"},data:e.sectionData,titles:["所有章节","出题范围"]},on:{change:e.update},model:{value:e.param.sections,callback:function(t){e.$set(e.param,"sections",t)},expression:"param.sections"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目数量"}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"单择题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.single.num,callback:function(t){e.$set(e.param.question.single,"num",t)},expression:"param.question.single.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.single.score,callback:function(t){e.$set(e.param.question.single,"score",t)},expression:"param.question.single.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"多择题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.mult.num,callback:function(t){e.$set(e.param.question.mult,"num",t)},expression:"param.question.mult.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.mult.score,callback:function(t){e.$set(e.param.question.mult,"score",t)},expression:"param.question.mult.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"填空题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.gap.num,callback:function(t){e.$set(e.param.question.gap,"num",t)},expression:"param.question.gap.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.gap.score,callback:function(t){e.$set(e.param.question.gap,"score",t)},expression:"param.question.gap.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"编程题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.program.num,callback:function(t){e.$set(e.param.question.program,"num",t)},expression:"param.question.program.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.program.score,callback:function(t){e.$set(e.param.question.program,"score",t)},expression:"param.question.program.score"}}),e._v(" 分\n        ")],1)],1),e._v("\n      总分："+e._s(e.allScore)+"\n    ")],1)],1):e._e()],1)},staticRenderFns:[]};var ye=n("VU/8")(we,xe,!1,function(t){n("8o11")},"data-v-90c9cba6",null).exports,ke={name:"ChoseClass",data:function(){return{props:{children:"children",label:"label"},c_id:"",treeData:[]}},created:function(){this.c_id=this.$route.params.c_id,this.getData()},methods:{getData:function(){var t=this;$http.get("/course/tree?c_id="+this.c_id).then(function(e){e.disabled=!0,e.children.forEach(function(t){return t.disabled=!0}),t.treeData.push(e)})},handleChange:function(t,e,n){var a="";if(3==t.level){if(1==e)for(var s=0;s<this.treeData[0].children.length;s++){var i=this.treeData[0].children[s];if(-1!=i.children.findIndex(function(e){return e.id==t.id})){a=i.label;break}}this.$emit("class-change",t,e,a)}}}},Ce={render:function(){var t=this.$createElement;return(this._self._c||t)("el-tree",{attrs:{data:this.treeData,"node-key":"id","default-expanded-keys":[this.c_id],props:this.props,"default-expand-all":"","check-on-click-node":"","show-checkbox":""},on:{"check-change":this.handleChange}})},staticRenderFns:[]};var $e=n("VU/8")(ke,Ce,!1,function(t){n("oUWJ")},null,null).exports,De={name:"AddHomework",components:{ChoseHomeworkQuestion:ye,ChoseClass:$e},data:function(){return{form:{test_name:"",t_type:1,start_time:"",end_time:"",work_time:0,get_question_type:"",questionData:null,choseClass:[],c_id:"",demand:""},currentStep:1}},computed:{startTime:function(){return this.$moment(this.form.start_time).format("YYYY-MM-DD hh:mm")},endTime:function(){return this.$moment(this.form.end_time).format("YYYY-MM-DD hh:mm")}},created:function(){this.form.c_id=this.$route.params.c_id},methods:{submit:function(){var t=this;$http.post("test",this.form).then(function(e){alertMessage("发布成功","success"),t.$router.push(".")})},classChange:function(t,e,n){e?this.form.choseClass.push({id:t.id,label:n+"-"+t.label}):this.form.choseClass.splice(this.form.choseClass.findIndex(function(e){return e.id==t.id}),1)},changeHomeworkQuestion:function(t){console.log(t),null==t?this.form.questionData=null:(this.form.get_question_type=t.type,this.form.questionData=t.data)},nextStep:function(){1!=this.currentStep||""!=this.form.test_name&&""!=this.form.start_time&&""!=this.form.end_time?2!=this.currentStep||null!=this.form.questionData?this.currentStep++:alertMessage("请选择好题目组","error"):alertMessage("请勿留空","error")}}},Se={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-steps",{staticStyle:{margin:"10px"},attrs:{active:t.currentStep,"align-center":""}},[n("el-step",{attrs:{title:"基本信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择题目"}}),t._v(" "),n("el-step",{attrs:{title:"选择班级"}}),t._v(" "),n("el-step",{attrs:{title:"总览"}})],1),t._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:1==t.currentStep,expression:"currentStep==1"}],attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"作业名称"}},[n("el-input",{staticStyle:{width:"400px"},model:{value:t.form.test_name,callback:function(e){t.$set(t.form,"test_name",e)},expression:"form.test_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"作业描述"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入作业要求"},model:{value:t.form.demand,callback:function(e){t.$set(t.form,"demand",e)},expression:"form.demand"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择开始时间"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择结束时间"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1)],1),t._v(" "),n("chose-homework-question",{directives:[{name:"show",rawName:"v-show",value:2==t.currentStep,expression:"currentStep==2"}],ref:"choseQuestion",on:{questionChange:t.changeHomeworkQuestion}}),t._v(" "),n("chose-class",{directives:[{name:"show",rawName:"v-show",value:3==t.currentStep,expression:"currentStep==3"}],on:{"class-change":t.classChange}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:4==t.currentStep,expression:"currentStep==4"}]},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"作业名"}},[t._v(t._s(t.form.test_name))]),t._v(" "),n("el-form-item",{attrs:{label:"考试要求"}},[n("pre",{staticStyle:{"line-height":"20px"}},[t._v(t._s(t.form.demand))])]),t._v(" "),n("el-form-item",{attrs:{label:"开始时间"}},[t._v(t._s(t.startTime))]),t._v(" "),n("el-form-item",{attrs:{label:"结束时间"}},[t._v(t._s(t.endTime))]),t._v(" "),n("el-form-item",{attrs:{label:"作业题组"}},["1"==t.form.get_question_type?[t._v("\n          "+t._s(t.form.questionData.qg_name)+"\n        ")]:[t._v("\n          自动出题\n        ")]],2),t._v(" "),n("el-form-item",{attrs:{label:"选中班级"}},t._l(t.form.choseClass,function(e){return n("div",{key:e.id},[t._v("\n          "+t._s(e.label)+"\n        ")])}),0)],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStep>1,expression:"currentStep>1"}],attrs:{size:"small",type:"primary"},on:{click:function(e){t.currentStep--}}},[t._v("上一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStep<4,expression:"currentStep<4"}],attrs:{size:"small",type:"primary"},on:{click:t.nextStep}},[t._v("下一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:4==t.currentStep,expression:"currentStep==4"}],attrs:{size:"small",type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var qe=n("VU/8")(De,Se,!1,function(t){n("t8By")},null,null).exports,Ie={name:"ChoseExamQuestion",components:{QuestionGroupTable:ie},props:["name"],data:function(){return{type:"",qg_data:{},param:{question:{single:{num:"5",score:"5"},mult:{num:"3",score:"5"},gap:{num:"4",score:"5"},program:{num:"2",score:"20"}},sections:[],level:"3",allScore:0},sectionData:[]}},watch:{qg_data:function(t){this.update()},"param.sections":function(t){this.update()}},computed:{allScore:function(){var t=0;for(var e in this.param.question)t+=parseInt(this.param.question[e].num)*parseInt(this.param.question[e].score);return this.param.allScore=t,t}},created:function(){this.c_id=this.$route.params.c_id,this.getSectionData()},methods:{getSectionData:function(){var t=this;$http.get("/course/"+this.c_id+"/section").then(function(e){t.sectionData=e})},typeChange:function(){this.$emit("questionChange",null)},update:function(){var t=void 0;"1"==this.type?t=this.qg_data:"2"==this.type&&(t=this.param),this.$emit("questionChange",{type:this.type,data:t})}}},Ee={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择出题方式"}},[a("el-select",{on:{change:e.typeChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"选择题组",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"自动组卷",value:"2"}})],1)],1),e._v(" "),"1"==e.type?a("div",[a("div",[e._v("当前选中："+e._s(e.qg_data.qg_name))]),e._v(" "),a("question-group-table",{attrs:{type:"2"},on:{choseQuestionGroup:function(e){return t.qg_data=e}}})],1):e._e(),e._v(" "),"2"==e.type?a("div",[a("el-form-item",{attrs:{label:"试卷难度"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:e.param.level,callback:function(t){e.$set(e.param,"level",t)},expression:"param.level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"考试范围"}},[a("el-transfer",{attrs:{props:{key:"s_id",label:"s_name"},data:e.sectionData,titles:["所有章节","出题范围"]},on:{change:e.update},model:{value:e.param.sections,callback:function(t){e.$set(e.param,"sections",t)},expression:"param.sections"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目详情"}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"单择题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.single.num,callback:function(t){e.$set(e.param.question.single,"num",t)},expression:"param.question.single.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.single.score,callback:function(t){e.$set(e.param.question.single,"score",t)},expression:"param.question.single.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"多择题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.mult.num,callback:function(t){e.$set(e.param.question.mult,"num",t)},expression:"param.question.mult.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.mult.score,callback:function(t){e.$set(e.param.question.mult,"score",t)},expression:"param.question.mult.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"填空题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.gap.num,callback:function(t){e.$set(e.param.question.gap,"num",t)},expression:"param.question.gap.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.gap.score,callback:function(t){e.$set(e.param.question.gap,"score",t)},expression:"param.question.gap.score"}}),e._v(" 分\n        ")],1),e._v(" "),a("el-form-item",{attrs:{label:"编程题"}},[a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.program.num,callback:function(t){e.$set(e.param.question.program,"num",t)},expression:"param.question.program.num"}}),e._v(" 道，每题\n          "),a("el-input",{staticClass:"question-num",on:{input:e.update},model:{value:e.param.question.program.score,callback:function(t){e.$set(e.param.question.program,"score",t)},expression:"param.question.program.score"}}),e._v(" 分\n        ")],1)],1),e._v("\n      总分："+e._s(e.allScore)+"\n\n    ")],1)],1):e._e()],1)},staticRenderFns:[]};var Te={name:"AddTest",components:{ChoseExamQuestion:n("VU/8")(Ie,Ee,!1,function(t){n("U56M")},"data-v-4dcf7bfb",null).exports,ChoseClass:$e},data:function(){return{form:{test_name:"",t_type:2,start_time:"",end_time:"",work_time:120,get_question_type:"",questionData:{},choseClass:[],c_id:"",demand:""},currentStep:1}},computed:{startTime:function(){return this.$moment(this.form.start_time).format("YYYY-MM-DD hh:mm")}},created:function(){this.form.c_id=this.$route.params.c_id},methods:{submit:function(){var t=this;$http.post("test",this.form).then(function(e){alertMessage("发布成功","success"),t.$router.push(".")})},classChange:function(t,e,n){e?this.form.choseClass.push({id:t.id,label:n+"-"+t.label}):this.form.choseClass.splice(this.form.choseClass.findIndex(function(e){return e.id==t.id}),1)},changeExamQuestion:function(t){null==t?this.form.questionData=null:(this.form.get_question_type=t.type,this.form.questionData=t.data)},nextStep:function(){1!=this.currentStep||""!=this.form.test_name&&""!=this.form.start_time?2!=this.currentStep||null!=this.form.questionData?this.currentStep++:alertMessage("请选择好题目组","error"):alertMessage("请勿留空","error")}}},Ue={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-steps",{staticStyle:{margin:"10px"},attrs:{active:t.currentStep,"align-center":""}},[n("el-step",{attrs:{title:"基本信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择题目"}}),t._v(" "),n("el-step",{attrs:{title:"选择班级"}}),t._v(" "),n("el-step",{attrs:{title:"总览"}})],1),t._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:1==t.currentStep,expression:"currentStep==1"}],attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"考试名称"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.test_name,callback:function(e){t.$set(t.form,"test_name",e)},expression:"form.test_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"考试要求"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入考试要求"},model:{value:t.form.demand,callback:function(e){t.$set(t.form,"demand",e)},expression:"form.demand"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择开始时间"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"考试时长"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.work_time,callback:function(e){t.$set(t.form,"work_time",e)},expression:"form.work_time"}})],1)],1),t._v(" "),n("chose-exam-question",{directives:[{name:"show",rawName:"v-show",value:2==t.currentStep,expression:"currentStep==2"}],ref:"choseQuestion",attrs:{name:t.form.test_name},on:{questionChange:t.changeExamQuestion}}),t._v(" "),n("chose-class",{directives:[{name:"show",rawName:"v-show",value:3==t.currentStep,expression:"currentStep==3"}],on:{"class-change":t.classChange}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:4==t.currentStep,expression:"currentStep==4"}]},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"考试名称"}},[t._v(t._s(t.form.test_name))]),t._v(" "),n("el-form-item",{attrs:{label:"考试要求"}},[n("pre",{staticStyle:{"line-height":"20px"}},[t._v(t._s(t.form.demand))])]),t._v(" "),n("el-form-item",{attrs:{label:"开始时间"}},[t._v(t._s(t.startTime))]),t._v(" "),n("el-form-item",{attrs:{label:"考试时长"}},[t._v(t._s(t.form.work_time))]),t._v(" "),n("el-form-item",{attrs:{label:"作业题组"}},["1"==t.form.get_question_type?[t._v("\n          "+t._s(t.form.questionData.qg_name)+"\n        ")]:"2"==t.form.get_question_type?[t._v("\n          自动组卷\n        ")]:t._e()],2),t._v(" "),n("el-form-item",{attrs:{label:"选中班级"}},t._l(t.form.choseClass,function(e){return n("div",{key:e.id},[t._v("\n          "+t._s(e.label)+"\n        ")])}),0)],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStep>1,expression:"currentStep>1"}],attrs:{size:"small",type:"primary"},on:{click:function(e){t.currentStep--}}},[t._v("上一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStep<4,expression:"currentStep<4"}],attrs:{size:"small",type:"primary"},on:{click:t.nextStep}},[t._v("下一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:4==t.currentStep,expression:"currentStep==4"}],attrs:{size:"small",type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Me=n("VU/8")(Te,Ue,!1,function(t){n("/gdM")},null,null).exports,ze={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Fe=n("VU/8")({name:"CourseMain"},ze,!1,null,null,null).exports,Re={name:"EditStudent",data:function(){return{formData:{}}},methods:{close:function(){this.$emit("closeDialog")},init:function(t){var e={};F()(e,t),this.formData=e,this.formData.password=""},add:function(){var t=this,e=this;$http.put("/user/"+this.formData.u_id+"/change_student_info",this.formData).then(function(n){e.$message({message:"操作成功",type:"success",center:!0}),e.$emit("closeDialog",t.formData)})},success:function(t){}}},Ne={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"72px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)}},model:{value:t.formData.u_name,callback:function(e){t.$set(t.formData,"u_name",e)},expression:"formData.u_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"学号"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)}},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)}},model:{value:t.formData.email_addr,callback:function(e){t.$set(t.formData,"email_addr",e)},expression:"formData.email_addr"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{placeholder:"不修改请勿输入"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.close}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.add}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var je={name:"ShowClass",components:{EditStudent:n("VU/8")(Re,Ne,!1,function(t){n("URif")},"data-v-1125bf2c",null).exports},props:["id"],data:function(){return{tableData:[],isDialogShow:!1,currentRowData:""}},created:function(){this.getData()},watch:{id:function(t){this.tableData=[],this.getData()}},methods:{edit:function(t){this.currentRowData=t,this.isDialogShow=!0,this.$nextTick(function(){this.$refs.editStudent.init(t)})},deleteOne:function(t){var e=this;alertConfirm("确认从本班中删除该同学吗？").then(function(){$http.delete("/class/"+e.id+"/user/"+t.u_id).then(function(n){e.$message({message:"删除成功",type:"success",center:!0}),e.tableData.splice(e.tableData.indexOf(t),1)})})},getData:function(){if(""!=this.id){var t=this;$http.get("/class/"+this.id+"/user").then(function(e){t.tableData=e})}else this.tableData=[]},closeDialog:function(t){void 0!=t&&(this.currentRowData.code=t.code,this.currentRowData.u_name=t.u_name,this.currentRowData.email_addr=t.email_addr),this.isDialogShow=!1,this.currentRowData=""}}},Ve={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"index",width:"50px",label:"#"}}),t._v(" "),n("el-table-column",{attrs:{prop:"code",label:"学号",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",label:"姓名",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"evaluate",label:"水平值",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.sex?n("span",[t._v("男")]):1==e.row.sex?n("span",[t._v("女")]):n("span",[t._v("未知")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"email_addr",label:"邮箱地址"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteOne(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{visible:t.isDialogShow,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"编辑"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("edit-student",{ref:"editStudent",attrs:{data:t.currentRowData},on:{closeDialog:t.closeDialog}})],1)],1)},staticRenderFns:[]};var Ae={name:"AddNode",props:["currentAction","id"],data:function(){return{year:"",name:""}},methods:{close:function(){this.inputData="",this.$emit("closeDialog")},add:function(){var t=this;"grade"==this.currentAction?$http.post("/grade",{c_id:this.id,content:new Date(this.year).getFullYear()+"级"}).then(function(e){t.success({id:e,label:new Date(t.year).getFullYear()+"级",level:2})}):$http.post("/class",{g_id:this.id,content:this.name}).then(function(e){t.success({id:e,label:t.name,level:3})})},success:function(t){this.$message({message:"操作成功",type:"success",center:!0}),this.$emit("closeDialog",t)}}},Pe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"72px"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"grade"==t.currentAction?"选择年级":"输入班级"}},["grade"==t.currentAction?n("el-date-picker",{attrs:{align:"left",type:"year",placeholder:"选择年级"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}):n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.close}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.add}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Le={name:"OverView",components:{ShowClass:n("VU/8")(je,Ve,!1,function(t){n("v5Wd")},"data-v-5d89df53",null).exports,AddNode:n("VU/8")(Ae,Pe,!1,function(t){n("74Z8")},"data-v-5edfba92",null).exports},data:function(){return{treeData:[],defaultProps:{children:"children",label:"label"},filterText:"",isDialogShow:!1,isShowAddButton:!0,addButtonText:"新增年级",currentAction:"",currentNode:{},isShowTable:!1,currentClassId:""}},created:function(){var t=this;this.c_id=this.$route.params.c_id,$http.get("/course/tree?c_id="+this.c_id).then(function(e){t.treeData.push(e)})},watch:{filterText:function(t){this.$refs.tree.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},remove:function(t,e){var n="确定要删除整个班级吗？",a="/class/"+e.id;2==e.level&&(n="删除该年级吗？",a="/grade/"+e.id);var s=this;alertConfirm(n).then(function(){$http.delete(a).then(function(n){alertMessage("删除成功","success");var a=t.parent.data.children;a.splice(a.indexOf(e),1),3==e.level&&e.id==s.currentClassId&&(s.isShowTable=!1,s.currentClassId="")})})},append:function(t,e){this.currentNode=e,1==t.level?this.currentAction="grade":2==t.level&&(this.currentAction="class"),this.isDialogShow=!0},closeDialog:function(t){this.isDialogShow=!1,void 0!=t&&(void 0==this.currentNode.children&&this.$set(this.currentNode,"children",[]),this.currentNode.children.push(t))},handleClick:function(t){3==t.level?(this.currentClassId=t.id,this.isShowTable=!0):this.isShowTable=!1}}},Oe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"left"},[n("div",{staticClass:"action all-item-between all-item-vcenter"},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"搜索"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":"",accordion:"","filter-node-method":t.filterNode},on:{"node-click":t.handleClick},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,s=e.data;return n("div",{},[n("span",[t._v(t._s(a.label))]),t._v(" "),s.level<3?n("i",{staticClass:"el-icon-circle-plus primary",on:{click:function(e){return e.stopPropagation(),t.append(a,s)}}}):t._e(),t._v(" "),s.level>1&&(void 0==s.children||0==s.children.length)?n("i",{staticClass:"el-icon-remove warning",on:{click:function(e){return e.stopPropagation(),t.remove(a,s)}}}):t._e()])}}])})],1),t._v(" "),n("div",{staticClass:"right"},[n("show-class",{directives:[{name:"show",rawName:"v-show",value:t.isShowTable,expression:"isShowTable"}],attrs:{id:t.currentClassId}})],1),t._v(" "),n("el-dialog",{attrs:{visible:t.isDialogShow,title:"grade"==t.currentAction?"新增年级":"新增班级"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("add-node",{attrs:{currentAction:t.currentAction,id:t.currentNode.id},on:{closeDialog:t.closeDialog}})],1)],1)},staticRenderFns:[]};var Qe=n("VU/8")(Le,Oe,!1,function(t){n("Vqxk")},"data-v-eff91f04",null).exports,Ye={name:"ChoseClass",data:function(){return{allClass:[],optionValue:[]}},created:function(){this.getAllClass()},methods:{getAllClass:function(){var t=this;$http.get("/course/tree?c_id="+this.$route.params.c_id).then(function(e){e.children&&(t.dealTreeData(e.children),t.allClass=e.children)})},dealTreeData:function(t){var e=this;t.forEach(function(t){t.value=t.id,t.children&&e.dealTreeData(t.children)})},handleChange:function(t){2==t.length?this.$emit("update",t[1]):this.optionValue=[]}}},He={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-cascader",{attrs:{options:t.allClass},on:{change:t.handleChange},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}})},staticRenderFns:[]},Ge=n("VU/8")(Ye,He,!1,null,null,null).exports,Be={name:"AddSingleStudent",components:{ChoseClass:Ge},data:function(){return{class_id:"",u_name:"",code:"",password:"123456"}},methods:{resetData:function(){this.optionValue=[],this.class_id="",this.u_name="",this.code=""},submit:function(){var t=this;""!=this.class_id&&""!=this.u_name&&""!=this.code&&""!=this.password?$http.post("/class/"+this.class_id+"/add_one_student",{code:this.code,u_name:this.u_name,password:this.password}).then(function(e){alertMessage("加入成功","success"),t.code="",t.u_name=""}):alertMessage("请勿留空","error")}}},We={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("p",[t._v("如果该学生不存在，将新增一个用户并加入到该班级，如存在直接将该学生加入班级，学生信息不起作用")]),t._v(" "),n("el-form",{attrs:{"label-width":"40px"}},[n("el-form-item",{attrs:{label:"班级"}},[n("chose-class",{on:{update:function(e){return t.class_id=e}}})],1),t._v(" "),n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.u_name,callback:function(e){t.u_name=e},expression:"u_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"学号"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Ke=n("VU/8")(Be,We,!1,function(t){n("N+5n")},"data-v-07046b74",null).exports,Je={name:"AddManyStudent",components:{ChoseClass:Ge},data:function(){return{class_id:"",fileName:"",files:[],errData:[]}},methods:{choseFile:function(t,e){console.log(t),this.files=[],this.files.push(t)},submit:function(){var t=this;this.errData=[];var e=new FormData;e.set("xlsx",this.files[0].raw),e.set("class_id",this.class_id),$http.post("/class/"+this.class_id+"/add_many_student",e,!0).then(function(e){0==e.length?t.$message({message:"全部加入成功",type:"success",center:!0}):(t.$message({message:"部分加入失败",type:"warning",center:!0}),t.errData=e)})}}},Ze={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("a",{attrs:{href:"/static/student.xlsx",download:"模板.xlsx"}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v("点击下载模板")])],1),t._v(" "),n("el-form",{attrs:{"label-width":"50px"}},[n("el-form-item",{attrs:{label:"班级"}},[n("chose-class",{on:{update:function(e){return t.class_id=e}}})],1),t._v(" "),n("el-form-item",{attrs:{label:"文件"}},[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","file-list":t.files,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","on-change":t.choseFile,multiple:"","auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或\n          "),n("em",[t._v("点击选择")])]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xls/xlsx文件，且不超过1MB")])])],1),t._v(" "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1),t._v(" "),t._l(t.errData,function(e,a){return n("div",{key:a},[t._v("\n    "+t._s(a+1)+" "+t._s(e.info)+" "+t._s(e.errorInfo)+"\n  ")])})],2)},staticRenderFns:[]};var Xe=n("VU/8")(Je,Ze,!1,function(t){n("vyF8")},"data-v-7f0febc2",null).exports,tn={name:"Badge",props:["data","type"],data:function(){return{u_id:getUserInfo().u_id,nextData:{},isLoading:!0}},created:function(){null!=this.data.next_level&&"person"==this.type&&this.getData()},methods:{getData:function(){var t=this;$http.get("/user/"+this.u_id+"/badge/"+this.data.next_level+"?type="+this.data.b_type).then(function(e){t.nextData=e})}}},en={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{placement:"top",trigger:"hover"}},["person"==t.type?n("div",[n("div",[t._v("当前：\n        "),n("h5",[t._v(t._s(t.data.b_name))])]),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("获取条件："+t._s(t.data.get_condition))]),t._v(" "),null==t.data.next_level?n("div",[t._v("下一阶段：无")]):n("div",[t._v("下一阶段："+t._s(t.nextData.next.b_name))]),t._v(" "),n("div",[t._v("获取条件："+t._s(t.nextData.next.get_condition))]),t._v(" "),n("div",[t._v("当前："+t._s(t.nextData.current))])]):n("div",[t._v("\n      获取条件："+t._s(t.data.get_condition)+"\n    ")]),t._v(" "),n("div",{staticClass:"item",attrs:{slot:"reference"},slot:"reference"},[n("img",{staticClass:"badge",attrs:{src:t.data.b_img}}),t._v(" "),n("span",[t._v(t._s(t.data.b_name))])])])],1)},staticRenderFns:[]};var nn={name:"StudentBadge",props:["data"],components:{Badge:n("VU/8")(tn,en,!1,function(t){n("K3g1")},"data-v-4f758a21",null).exports},data:function(){return{badgeList:[]}},computed:{showBadge:function(){return this.badgeList.slice(0,3)}},created:function(){this.getData()},methods:{getData:function(){var t=this;$http.get("/user/"+this.data.u_id+"/badge").then(function(e){t.badgeList=e})}}},an={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-item-vcenter"},[n("el-popover",{attrs:{placement:"top",trigger:"hover",width:"200"}},[n("span",[t._v("已获得徽章总数:"+t._s(t.badgeList.length))]),t._v(" "),n("div",{staticClass:"show-badge"},t._l(t.badgeList,function(t){return n("badge",{key:t.b_id,staticStyle:{"margin-right":"5px","margin-bottom":"5px"},attrs:{data:t}})}),1),t._v(" "),n("div",{staticClass:"all-item-vcenter",attrs:{slot:"reference"},slot:"reference"},[n("span",[t._v(t._s(t.data.u_name))]),t._v(" "),t._l(t.showBadge,function(t){return n("img",{key:t.b_id,staticClass:"small-badge",attrs:{src:t.b_img}})})],2)])],1)},staticRenderFns:[]};var sn={name:"MessageList",props:["data"],data:function(){return{current:null,u_id:""}},components:{StudentBadge:n("VU/8")(nn,an,!1,function(t){n("eNhx")},"data-v-5682b87a",null).exports},created:function(){this.u_id=getUserInfo().u_id,this.$watch("data",this.init),this.init()},methods:{init:function(){var t=this;this.data.forEach(function(e){e!=t.current&&(e.start_u_id==t.u_id?t.$set(e,"type","start"):t.$set(e,"type","reply"))})},change:function(t){this.current!==t&&(this.$emit("change",t),this.current=t,t.hasNew=0,"start"==t.type?t.is_new_reply=0:t.is_new_question=0)}}},rn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[t._l(t.data,function(e){return n("div",{key:e.qa_id,staticClass:"item all-item-between all-item-vcenter",class:{active:null!=t.current&&e.qa_id==t.current.qa_id},on:{click:function(n){return t.change(e)}}},[n("div",{staticStyle:{width:"170px",overflow:"hidden"}},["start"==e.type?n("student-badge",{attrs:{data:{u_id:e.reply_u_id,u_name:e.reply_u_name}}}):n("student-badge",{attrs:{data:{u_id:e.start_u_id,u_name:e.start_u_name}}}),t._v("\n      topic:"+t._s(e.topic)+"\n    ")],1),t._v(" "),"start"==e.type&&1==e.is_new_reply||"reply"==e.type&&1==e.is_new_question?n("span",{staticClass:"dot"}):t._e()])}),t._v(" "),0==t.data.length?n("div",[t._v("\n    尚无提问\n  ")]):t._e()],2)},staticRenderFns:[]};var on={name:"MessageDetail",props:["data"],data:function(){return{MessageData:[],lastUpdateTime:0,timer:null,isGettingData:!1,u_id:"",type:"",contentDiv:null,otherUserIcon:"",userIcon:"",form:{content:""}}},created:function(){this.$watch("data",this.init);var t=getUserInfo();this.u_id=t.u_id,this.userIcon=t.icon,this.init()},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{init:function(){var t=this;null!=this.data?(this.data.start_u_id==this.u_id?this.type="start":this.type="reply",this.contentDiv=document.getElementById("content"),this.MessageData=[],this.lastUpdateTime=0,this.isGettingData=!1,null!=this.timer&&clearInterval(this.timer),this.getData(),1!==this.data.is_closed&&(this.timer=setInterval(function(){t.getNewMessage()},1e3))):null!=this.timer&&clearInterval(this.timer)},getData:function(){var t=this;this.isGettingData=!0,$http.get("question_answer/"+this.data.qa_id+"/detail?time="+this.lastUpdateTime+"&type="+this.type).then(function(e){e.length>0&&(t.MessageData=e,t.lastUpdateTime=e[e.length-1].send_time),t.isGettingData=!1,t.scrollBottom()}),$http.get("user/"+("start"==this.type?this.data.reply_u_id:this.data.start_u_id)).then(function(e){t.otherUserIcon=e.icon})},scrollBottom:function(){var t=this;this.$nextTick(function(){t.contentDiv.scrollTop=t.contentDiv.scrollHeight})},getNewMessage:function(){var t=this;if(!this.isGettingData){this.isGettingData=!0;var e=this.data.qa_id;$http.get("question_answer/"+this.data.qa_id+"/detail?time="+this.lastUpdateTime+"&type="+this.type).then(function(n){if(n.length>0&&t.data.qa_id==e){for(var a=0;a<n.length;a++)t.MessageData.push(n[a]);t.lastUpdateTime=n[n.length-1].send_time,t.scrollBottom()}t.isGettingData=!1}).catch(function(e){t.isGettingData=!1})}},sendData:function(){var t=this;$http.post("/question_answer/"+this.data.qa_id+"/question_answer_detail",this.form).then(function(e){t.form.content=""})},close:function(){var t=this;alertConfirm("确定关闭本答疑？（关闭后双方无法再次回复）").then(function(){$http.put("/question_answer/"+t.data.qa_id+"/close",{start_u_id:t.data.start_u_id}).then(function(e){alertMessage("关闭成功","success"),t.$emit("closeMessage"),t.data.is_closed=1})})}}},ln={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"content",attrs:{id:"content"}},[t._l(t.MessageData,function(e,a){return[e.u_id!=t.u_id?n("div",{key:a,staticClass:"item"},[n("img",{staticClass:"head-img",attrs:{src:t.otherUserIcon}}),t._v(" "),n("show-text",{staticClass:"text",attrs:{data:e.content}})],1):n("div",{key:a,staticClass:"right item"},[n("show-text",{staticClass:"text",attrs:{data:e.content}}),t._v(" "),n("img",{staticClass:"head-img",attrs:{src:t.userIcon}})],1)]})],2),t._v(" "),null!=t.data&&0===t.data.is_closed?n("div",{staticClass:"bottom"},[n("editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),n("div",{staticClass:"action"},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.close}},[t._v("关闭答疑")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sendData}},[t._v("发送")])],1)],1):t._e()])},staticRenderFns:[]};var cn={name:"CurrentQuestionAnswer",components:{MessageList:n("VU/8")(sn,rn,!1,function(t){n("H8BN")},"data-v-afa4d534",null).exports,MessageDetail:n("VU/8")(on,ln,!1,function(t){n("WoWk")},"data-v-76b3334e",null).exports},data:function(){return{dataList:[],dataObj:{},currentMessage:null,c_id:"",u_id:"",timer:null,isGettingData:!1}},created:function(){var t=this;this.c_id=this.$route.params.c_id,this.u_id=getUserInfo().u_id,this.getData(),this.timer=setInterval(function(){t.getData()},1e3)},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{getData:function(){var t=this;this.isGettingData||(this.isGettingData=!0,$http.get("/question_answer?c_id="+this.c_id+"&type=all&is_closed=0").then(function(e){(e.sort(function(t,e){return e.create_time-t.create_time}),null!=t.currentMessage)&&(-1==e.findIndex(function(e){return e.qa_id==t.currentMessage.qa_id})&&(t.currentMessage=null));t.dataList=e,t.isGettingData=!1}).catch(function(e){return t.isGettingData=!1}))}}},un={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("div",{staticStyle:{display:"flex"}},[a("message-list",{attrs:{data:e.dataList},on:{change:function(e){return t.currentMessage=e}}}),e._v(" "),a("message-detail",{directives:[{name:"show",rawName:"v-show",value:null!=e.currentMessage,expression:"currentMessage!=null"}],attrs:{data:e.currentMessage},on:{closeMessage:function(t){e.currentMessage=null}}})],1)])},staticRenderFns:[]};var dn=n("VU/8")(cn,un,!1,function(t){n("8JiB")},null,null).exports,mn={name:"StudentStatistics",data:function(){return{data:{studentNum:0,evaluate:[]},c_id:""}},mounted:function(){this.$watch("$route.path",this.getData),this.getData()},methods:{getData:function(){var t=this;this.c_id=this.$route.params.c_id,document.getElementById("sf").innerHTML="",$http.get("/course/"+this.c_id+"/statistics").then(function(e){t.data=e,t.createChart1()})},createChart1:function(){var t=new(0,DataSet.DataView);t.source(this.data.evaluate).transform({type:"percent",field:"num",dimension:"range",as:"percent"});var e=new G2.Chart({container:"sf",forceFit:!0,height:300});e.source(t,{percent:{formatter:function(t){return t=(100*t).toFixed(0)+"%"}}}),e.coord("theta"),e.tooltip({showTitle:!1,itemTpl:'<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),e.intervalStack().position("percent").color("range").label("percent",{offset:-40,textStyle:{rotate:0,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}).tooltip("range*percent",function(t,e){return{name:t,value:e=(100*e).toFixed(0)+"%"}}).style({lineWidth:1,stroke:"#fff"}),e.render()}}},pn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"学生数量"}},[t._v("\n      "+t._s(t.data.studentNum)+"\n    ")]),t._v(" "),n("el-form-item",{attrs:{label:"水平分布"}},[n("div",{staticClass:"all-item-start"},[n("div",{staticClass:"evaluate-text"},t._l(t.data.evaluate,function(e,a){return n("div",{key:a},[n("span",{staticClass:"item"},[t._v(t._s(e.range))]),t._v("："+t._s(e.num)+"人\n          ")])}),0),t._v(" "),n("div",{staticClass:"evaluate-chart",attrs:{id:"sf"}})])])],1)],1)},staticRenderFns:[]};var hn={path:"/admin",component:q,beforeEnter:function(t,e,n){null==getUserInfo()?(console.log("asdf"),n({path:"/public/admin_login",replace:!0})):n()},children:[{path:"",name:"TotalStatistic",component:O},{path:"manage",component:Fe,children:[{path:"course_manage",name:"CourseManage",component:M},{path:"user_manage",name:"UserManage",component:A}]},{path:"person_space",component:Fe,children:[{path:"",name:"PersonInfo",component:H},{path:"safe/:type",name:"PersonSafe",component:W}]},{path:"course/:c_id/base",component:Fe,children:[{path:"",name:"CourseIntro",component:et},{path:"teacher_intro",name:"Teacher_intro",component:ot},{path:"first_course",name:"FirstCourse",component:ut},{path:"teach_plan",name:"TeachPlan",component:st},{path:"exam_type",name:"ExamType",component:pt},{path:"reference_book",name:"ReferenceBook",component:_t},{path:"section",name:"Section",component:bt},{path:"courseware_manage",name:"CoursewareManage",component:yt}]},{path:"course/:c_id/question_bank",component:Fe,children:[{path:"",name:"Overwatch",component:Nt},{path:"question_group_overview",name:"QuestionGroupOverview",component:le},{path:"organize_question",name:"OrganizeQuestion",component:Xt},{path:"add/choice_question",name:"AddChoiceQuestion",component:Ot},{path:"add/gap_filling",name:"AddGapFilling",component:Ht},{path:"add/program",name:"AddProgram",component:Wt}]},{path:"course/:c_id/test",component:Fe,children:[{path:"",name:"TestOverView",component:be},{path:"add_homework",name:"AddHomework",component:qe},{path:"add_exam",name:"AddExam",component:Me}]},{path:"course/:c_id/statistics",component:Fe,children:[{path:"",name:"StudentStatistics",component:n("VU/8")(mn,pn,!1,function(t){n("pO+c")},"data-v-08f88bcc",null).exports}]},{path:"course/:c_id/student",component:Fe,children:[{path:"",name:"OverView",component:Qe},{path:"add_one",name:"AddSingleStudent",component:Ke},{path:"add_many",name:"AddManyStudent",component:Xe}]},{path:"course/:c_id/announcement",component:Fe,children:[{path:"",name:"AnnouncementOverView",component:$t},{path:"add",name:"AddAnnouncement",component:qt}]},{path:"course/:c_id/Q_A",component:Fe,children:[{path:"",name:"CurrentQuestionAnswer",component:dn}]}]},fn={name:"Top",data:function(){return{courseList:[],currentCourseId:-1,isPersonInfoDropdown:!1,userInfo:{},isCompleted:!1}},watch:{"$route.path":function(t){"/client"==t||t.startsWith("/client/person")?this.currentCourseId=-1:this.init()}},computed:{courseName:function(){var t=this;if(0==this.isCompleted)return"正在加载";if(0==this.courseList.length)return"无课程";if(-1==this.currentCourseId)return"我的课程";var e=this.courseList.findIndex(function(e){return e.c_id==t.currentCourseId});if(-1!=e)return this.courseList[e].c_name;this.$router.replace("/error/404")}},created:function(){var t=this;this.getCourse(),this.getUserInfo(),bus.$on("updateUserInfo",function(){t.getUserInfo()})},methods:{handleSelect:function(t,e){if("course"==e[0])this.currentCourseId=e[1],this.$refs.topMenu.activeIndex="adsfad",this.$router.push("/client/course/"+e[1]+"/announcement");else{var n="/client/course/"+this.currentCourseId+"/"+e.join("/");this.$router.push(n)}},handleCommand:function(t){switch(t){case"logout":clearClientInfo(),this.$router.push("/public/client_login");break;case"info":this.$router.push("/client/person/student_info")}},getCourse:function(){var t=this;$httpc.get("/user/"+getClientUserInfo().u_id+"/course").then(function(e){t.courseList=e,bus.$emit("courseList",e),t.isCompleted=!0,t.$nextTick(function(){t.init()})})},getUserInfo:function(){var t=this;$httpc.get("/user/"+getClientUserInfo().u_id).then(function(e){t.userInfo=e,localStorage.setItem("clientUserInfo",d()(e))})},init:function(){var t=this.$route.path.split("/").slice(1);if("course"==t[1]){var e=parseInt(t[2]);this.currentCourseId=e,this.$refs.topMenu.activeIndex=t[4]}}}},_n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app all-item-vcenter all-item-between"},[a("div",{staticClass:"left all-item-vcenter"},[a("router-link",{attrs:{to:"/client"}},[a("img",{staticStyle:{width:"50px"},attrs:{src:n("s5gt")}})]),t._v(" "),a("el-menu",{ref:"topMenu",staticStyle:{"border-bottom":"0"},attrs:{mode:"horizontal","background-color":"#f2efe6","menu-trigger":"hover","unique-opened":!0},on:{select:t.handleSelect}},[a("el-submenu",{staticStyle:{"margin-right":"10px"},attrs:{index:"course"}},[a("template",{slot:"title"},[a("span",{staticClass:"course-name"},[t._v(t._s(t.courseName))])]),t._v(" "),t._l(t.courseList,function(e){return a("el-menu-item",{key:e.c_id,attrs:{disabled:e.c_id==t.currentCourseId,index:e.c_id.toString()}},[t._v(t._s(e.c_name))])})],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"base"}},[a("template",{slot:"title"},[t._v("课程信息")]),t._v(" "),a("el-menu-item",{attrs:{index:"course_intro"}},[t._v("课程介绍")]),t._v(" "),a("el-menu-item",{attrs:{index:"teacher_intro"}},[t._v("教师介绍")]),t._v(" "),a("el-menu-item",{attrs:{index:"first_course"}},[t._v("先导课程")]),t._v(" "),a("el-menu-item",{attrs:{index:"teach_plan"}},[t._v("教学计划")]),t._v(" "),a("el-menu-item",{attrs:{index:"exam_type"}},[t._v("考试方式")]),t._v(" "),a("el-menu-item",{attrs:{index:"reference_book"}},[t._v("参考书目")]),t._v(" "),a("el-menu-item",{attrs:{index:"courseware"}},[t._v("课件下载")])],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"knowledge_point"}},[a("template",{slot:"title"},[t._v("知识点检测")]),t._v(" "),a("el-menu-item",{attrs:{index:"overview"}},[t._v("总览")]),t._v(" "),a("el-menu-item",{attrs:{index:"history"}},[t._v("历史")])],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"work"}},[a("template",{slot:"title"},[t._v("在线作业")]),t._v(" "),a("el-menu-item",{attrs:{index:"current_work"}},[t._v("当前作业")]),t._v(" "),a("el-menu-item",{attrs:{index:"last_work"}},[t._v("历史作业")])],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"exam"}},[a("template",{slot:"title"},[t._v("在线考试")]),t._v(" "),a("el-menu-item",{attrs:{index:"current_exam"}},[t._v("当前考试")]),t._v(" "),a("el-menu-item",{attrs:{index:"last_exam"}},[t._v("历史考试")])],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"rank_list"}},[a("template",{slot:"title"},[t._v("排行榜")]),t._v(" "),a("el-menu-item",{attrs:{index:"evaluate"}},[t._v("实力排行")]),t._v(" "),a("el-menu-item",{attrs:{index:"coverage"}},[t._v("知识点覆盖率排行")])],2),t._v(" "),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.currentCourseId>-1,expression:"currentCourseId>-1"}],attrs:{index:"question_answer"}},[a("template",{slot:"title"},[t._v("答疑")]),t._v(" "),a("el-menu-item",{attrs:{index:"new"}},[t._v("我要提问")]),t._v(" "),a("el-menu-item",{attrs:{index:"current"}},[t._v("当前答疑")]),t._v(" "),a("el-menu-item",{attrs:{index:"historyqa"}},[t._v("历史答疑")])],2)],1)],1),t._v(" "),a("div",{staticClass:"right"},[a("el-dropdown",{staticStyle:{background:"#f2efe6"},attrs:{trigger:"hover"},on:{command:t.handleCommand,"visible-change":function(e){return t.isPersonInfoDropdown=e}}},[a("div",{staticClass:"all-item-vcenter pointer"},[a("img",{staticClass:"head-img",attrs:{src:t.userInfo.icon}}),t._v(" "),a("span",[t._v("\n          "+t._s(t.userInfo.u_name)+"\n          "),a("i",{class:t.isPersonInfoDropdown?"el-icon-caret-top":"el-icon-caret-bottom",staticStyle:{"font-size":"16px"}})])]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"info"}},[t._v("\n          我的资料\n        ")]),t._v(" "),a("el-dropdown-item",{attrs:{divided:"",command:"logout"}},[t._v("\n          退出系统\n        ")])],1)],1)],1)])},staticRenderFns:[]};var vn={name:"Client",components:{Top:n("VU/8")(fn,_n,!1,function(t){n("y0Nn")},"data-v-49efd797",null).exports},data:function(){return{timer:null}},beforeCreate:function(){window.type="client"},created:function(){document.title="教学辅助系统",this.checkTime(),this.timer=setInterval(this.checkTime,6e4)},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{checkTime:function(){var t=this;$httpc.get("/public/system_time").then(function(e){Math.abs(Date.now()-e)>12e4&&t.$alert("当前本地时间与服务器时间差距超过两分钟，请检查","提示",{confirmButtonText:"我知道了"})})}}},gn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"client-app"},[e("top",{staticClass:"client-top"}),this._v(" "),e("div",{staticClass:"client-content"},[e("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[e("router-view")],1)],1),this._v(" "),e("div",{staticClass:"client-bottom all-item-hcenter all-item-vcenter"},[e("router-link",{attrs:{to:"/about"}},[e("span",{staticStyle:{"font-size":".7em"}},[this._v("关于")])])],1)],1)},staticRenderFns:[]};var bn=n("VU/8")(vn,gn,!1,function(t){n("551H")},null,null).exports,wn={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},xn=n("VU/8")({name:"ClientMain"},wn,!1,null,null,null).exports,yn={name:"Badge",props:["data","type"],data:function(){return{u_id:getClientUserInfo().u_id,nextData:{},isLoading:!0}},created:function(){null!=this.data.next_level&&"person"==this.type&&this.getData()},methods:{getData:function(){var t=this;$httpc.get("/user/"+this.u_id+"/badge/"+this.data.next_level+"?type="+this.data.b_type).then(function(e){t.nextData=e})}}},kn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{placement:"top",trigger:"hover"}},["person"==t.type?n("div",[n("div",[t._v("当前：\n        "),n("h5",[t._v(t._s(t.data.b_name))])]),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("获取条件："+t._s(t.data.get_condition))]),t._v(" "),null==t.data.next_level?n("div",[t._v("下一阶段：无")]):n("div",[t._v("下一阶段："),n("h5",[t._v(t._s(t.nextData.next.b_name))])]),t._v(" "),n("div",[t._v("获取条件："+t._s(t.nextData.next.get_condition))]),t._v(" "),n("div",[t._v("当前："+t._s(t.nextData.current))])]):n("div",[t._v("\n      获取条件："+t._s(t.data.get_condition)+"\n    ")]),t._v(" "),n("div",{staticClass:"item",attrs:{slot:"reference"},slot:"reference"},[n("img",{staticClass:"badge",attrs:{src:t.data.b_img}}),t._v(" "),n("span",[t._v(t._s(t.data.b_name))])])])],1)},staticRenderFns:[]};var Cn=n("VU/8")(yn,kn,!1,function(t){n("MHJX")},"data-v-2d023039",null).exports,$n={name:"ClientHome",components:{Badge:Cn},data:function(){return{work:[],exam:[],badge:[],isLoad:0,u_id:""}},created:function(){this.u_id=getClientUserInfo().u_id,this.getData()},methods:{getData:function(){var t=this;$httpc.get("/user/"+this.u_id+"/test/undo").then(function(e){t.work=e.work,t.exam=e.exam,t.isLoad++}),$httpc.get("/user/"+this.u_id+"/badge").then(function(e){t.badge=e,t.isLoad++})}}},Dn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"当前作业"}},[t._l(t.work,function(e,a){return n("el-badge",{key:a,staticClass:"item",attrs:{value:e.count}},[n("router-link",{attrs:{to:"/client/course/"+e.c_id+"/work/current_work"}},[n("el-button",{attrs:{size:"mini",type:"info",plain:""}},[t._v(t._s(e.c_name))])],1)],1)}),t._v(" "),t.isLoad&&0==t.work.length?n("span",[t._v("无")]):t._e()],2),t._v(" "),n("el-form-item",{attrs:{label:"当前考试"}},[t._l(t.exam,function(e,a){return n("el-badge",{key:a,attrs:{value:e.count}},[n("router-link",{attrs:{to:"/client/course/"+e.c_id+"/exam/current_exam"}},[n("el-button",{attrs:{size:"mini",type:"info",plain:""}},[t._v(t._s(e.c_name))])],1)],1)}),t._v(" "),t.isLoad&&0==t.exam.length?n("span",[t._v("无")]):t._e()],2),t._v(" "),n("el-form-item",{attrs:{label:"我的徽章"}},t._l(t.badge,function(t){return n("badge",{key:t.b_id,staticStyle:{display:"inline-flex"},attrs:{data:t,type:"person"}})}),1)],1)],1)},staticRenderFns:[]};var Sn=n("VU/8")($n,Dn,!1,function(t){n("9MZ7")},"data-v-43d6a575",null).exports,qn={name:"Announcement",data:function(){return{announcementList:[],moment:null,isDialogShow:!1,currentContent:""}},created:function(){this.getData(),this.moment=this.$moment},watch:{"$route.path":function(){this.announcementList=[],this.getData()}},methods:{getData:function(){var t=this;$httpc.get("/course/"+this.$route.params.c_id+"/announcement/open").then(function(e){t.announcementList=e})},showContent:function(t){var e=this;this.currentContent="",$httpc.get("/announcement/"+t+"/content").then(function(t){e.currentContent=t}),this.isDialogShow=!0}}},In={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("el-breadcrumb",{staticClass:"breadcrumb"},[n("el-breadcrumb-item",[t._v("课程公告")])],1),t._v(" "),n("div",{staticClass:"content"},[0==t.announcementList.length?n("h4",{staticStyle:{"text-align":"center"}},[t._v("当前无公告")]):t._e(),t._v(" "),t._l(t.announcementList,function(e,a){return n("div",{key:e.a_id,staticClass:"all-item-between"},[n("div",[n("span",{staticClass:"num"},[t._v(t._s(a+1)+".")]),t._v(" "),n("span",{staticClass:"topic pointer",on:{click:function(n){return t.showContent(e.a_id)}}},[t._v(t._s(e.topic))])]),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t.moment(e.start_time).format("YYYY-MM-DD hh:mm")))])])})],2),t._v(" "),n("el-dialog",{attrs:{visible:t.isDialogShow,title:"详情"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("show-text",{attrs:{data:t.currentContent}})],1)],1)},staticRenderFns:[]};var En=n("VU/8")(qn,In,!1,function(t){n("CFTQ")},"data-v-7efecd5f",null).exports,Tn={name:"StudentInfo",data:function(){return{userInfo:{},currentEdit:"",imgUrl:null,sex:"",password:"",newPassword:"",repeatNewPassword:"",newEmail:"",choseFile:null,u_id:""}},computed:{sexName:function(){return 0==this.userInfo.sex?"男":1==this.userInfo.sex?"女":"未知"}},created:function(){this.u_id=getClientUserInfo().u_id,this.getUserInfo()},methods:{getUserInfo:function(){var t=this;$httpc.get("/user/"+this.u_id).then(function(e){localStorage.setItem("clientUserInfo",d()(e)),t.userInfo=e})},choseImg:function(t){var e=t.target.files[0];console.log(e),e.size>2097152?this.$message({message:"文件大小不得超过2M",type:"warning"}):(this.choseFile=e,this.imgUrl=URL.createObjectURL(e))},submit:function(){var t=this;if("icon"===this.currentEdit){var e=new FormData;e.append("icon",this.choseFile),e.append("u_id",this.u_id),$httpc.put("/user/change_simple_info",e,!0).then(function(e){alertMessage("修改成功","success"),t.getUserInfo(),bus.$emit("updateUserInfo"),t.currentEdit=""})}else"sex"===this.currentEdit?$httpc.put("/user/change_simple_info",{u_id:this.userInfo.u_id,sex:this.sex}).then(function(e){t.userInfo.sex=t.sex,alertMessage("修改成功","success"),t.currentEdit=""}):"password"===this.currentEdit?$httpc.put("/user/change_password",{password:this.password,newPassword:this.newPassword,repeatNewPassword:this.repeatNewPassword,u_id:this.u_id}).then(function(e){alertMessage("修改成功"),t.currentEdit=""}):"email"===this.currentEdit&&$httpc.put("/user/change_email",{password:this.password,newEmail:this.newEmail,u_id:this.u_id}).then(function(e){alertMessage("修改成功"),t.userInfo.email_addr=t.newEmail,t.currentEdit=""})}}},Un={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/client"}}},[t._v("首页")]),t._v(" "),n("el-breadcrumb-item",[t._v("个人资料")])],1),t._v(" "),n("el-form",{staticStyle:{width:"500px",margin:"0 auto"},attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"头像"}},["icon"==t.currentEdit?n("label",{staticClass:"upload-file all-item-vcenter all-item-hcenter pointer"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",accept:"image/*"},on:{change:t.choseImg}}),t._v(" "),t.imgUrl?n("img",{attrs:{src:t.imgUrl}}):n("i",{staticClass:"el-icon-plus"})]):[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击编辑",placement:"right"}},[n("img",{staticClass:"head-icon pointer",attrs:{src:t.userInfo.icon},on:{click:function(e){t.currentEdit="icon"}}})])]],2),t._v(" "),n("el-form-item",{attrs:{label:"性别"}},["sex"==t.currentEdit?n("el-select",{model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},[n("el-option",{attrs:{label:"男",value:"0"}}),t._v(" "),n("el-option",{attrs:{label:"女",value:"1"}})],1):[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击编辑",placement:"right"}},[n("span",{staticClass:"pointer",on:{click:function(e){t.currentEdit="sex"}}},[t._v(t._s(t.sexName))])])]],2),t._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},["email"==t.currentEdit?[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:"新邮箱"},model:{value:t.newEmail,callback:function(e){t.newEmail=e},expression:"newEmail"}})]:[n("span",[t._v(t._s(t.userInfo.email_addr))]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.currentEdit="email"}}},[t._v("修改")])]],2),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},["password"==t.currentEdit?[n("el-input",{attrs:{type:"password",placeholder:"旧密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t._v(" "),n("el-input",{attrs:{type:"password",placeholder:"重复新密码"},model:{value:t.repeatNewPassword,callback:function(e){t.repeatNewPassword=e},expression:"repeatNewPassword"}})]:n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.currentEdit="password"}}},[t._v("修改密码")])],2)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.currentEdit,expression:"currentEdit!=''"}],staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.currentEdit=""}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var Mn=n("VU/8")(Tn,Un,!1,function(t){n("tD8v")},"data-v-0718bad3",null).exports,zn={name:"CourseIntro",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=c_intro").then(function(e){t.data=e})}},Fn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["课程简介"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Rn=n("VU/8")(zn,Fn,!1,function(t){n("/jK3")},null,null).exports,Nn={name:"ExamType",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=exam_type").then(function(e){t.data=e})}},jn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["考试方式"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Vn=n("VU/8")(Nn,jn,!1,function(t){n("NvPD")},null,null).exports,An={name:"FirstCourse",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=first_course").then(function(e){t.data=e})}},Pn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["先导课程"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Ln=n("VU/8")(An,Pn,!1,function(t){n("72JN")},null,null).exports,On={name:"ReferenceBook",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=reference_book").then(function(e){t.data=e})}},Qn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["参考书推荐"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Yn=n("VU/8")(On,Qn,!1,function(t){n("PGfL")},null,null).exports,Hn={name:"TeacherIntro",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=teacher_intro").then(function(e){t.data=e})}},Gn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["教师简介"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Bn=n("VU/8")(Hn,Gn,!1,function(t){n("ZOK5")},null,null).exports,Wn={name:"TeachPlan",data:function(){return{data:""}},created:function(){var t=this;$httpc.get("/course/base_info?c_id="+this.$route.params.c_id+"&column=teach_plan").then(function(e){t.data=e})}},Kn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:["教学计划"]}}),this._v(" "),e("show-text",{staticClass:"show-base-info",attrs:{data:this.data}})],1)},staticRenderFns:[]};var Jn=n("VU/8")(Wn,Kn,!1,function(t){n("tzAx")},null,null).exports,Zn={name:"Courseware",data:function(){return{tableData:[]}},created:function(){var t=this;$httpc.get("/course/"+this.$route.params.c_id+"/courseware").then(function(e){t.tableData=e})},methods:{formatter:function(t){return this.$moment.unix(t.create_time/1e3).format("YYYY-MM-DD HH:mm")},download:function(t){window.open(t.downloadUrl)}}},Xn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["课件下载"]}}),t._v(" "),n("el-table",{attrs:{data:t.tableData,"default-sort":{prop:"cw_name"}}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"cw_name",sortable:"",label:"文件名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"上传时间",formatter:t.formatter,width:"180px"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.downloadUrl,download:e.row.cw_name}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v("下载")])],1)]}}])})],1)],1)},staticRenderFns:[]},ta=n("VU/8")(Zn,Xn,!1,null,null,null).exports,ea={name:"CurrentWork",data:function(){return{workList:[],moment:""}},created:function(){var t=this;this.moment=this.$moment;var e=getClientUserInfo().u_id,n=this.$route.params.c_id;$httpc.get("/user/"+e+"/course/"+n+"/test?type=1&isCurrent=true").then(function(e){t.workList=e})},methods:{getStartTime:function(t){return this.$moment(t.start_time).format("YYYY-MM-DD HH:mm")},getEndTime:function(t){return this.$moment(t.end_time).format("YYYY-MM-DD HH:mm")},workDetail:function(t){this.$router.push("current_work/"+t.test_id+"?action=do")}}},na={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["当前作业"]}}),t._v(" "),n("div",[n("el-table",{attrs:{data:t.workList,width:"100%","default-sort":{prop:"end_time",order:"descending"}}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"test_name",sortable:"",label:"作业名","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"demand",label:"要求","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"start_time",sortable:"",width:"150px",formatter:t.getStartTime}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"end_time",sortable:"",width:"150px",formatter:t.getEndTime}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.workDetail(e.row)}}},[t._v("开始作业")])]}}])})],1)],1)],1)},staticRenderFns:[]};var aa=n("VU/8")(ea,na,!1,function(t){n("Ulp4")},null,null).exports,sa={name:"LastWork",data:function(){return{workList:[],moment:""}},created:function(){var t=this;this.moment=this.$moment;var e=getClientUserInfo().u_id,n=this.$route.params.c_id;$httpc.get("/user/"+e+"/course/"+n+"/test?type=1&isCurrent=false").then(function(e){t.workList=e})},methods:{getStartTime:function(t){return this.$moment(t.start_time).format("YYYY-MM-DD HH:mm")},getEndTime:function(t){return this.$moment(t.end_time).format("YYYY-MM-DD HH:mm")},getScore:function(t){return null==t.score?"无":t.score},workDetail:function(t){this.$router.push("last_work/"+t.test_id+"?action=watch&isSubmit="+(0==t.submit_time?"no":"yes"))}}},ia={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["历史作业"]}}),t._v(" "),n("div",[n("el-table",{attrs:{data:t.workList,width:"100%","default-sort":{prop:"end_time",order:"descending"}}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"test_name",sortable:"",label:"作业名","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"demand",label:"要求","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.submit_time?n("el-tag",{attrs:{type:"danger"}},[t._v("未提交")]):n("el-tag",{attrs:{type:"success"}},[t._v("已提交")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"成绩",prop:"score",sortable:"",width:"80px",formatter:t.getScore}}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"start_time",sortable:"",width:"150px",formatter:t.getStartTime}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"end_time",sortable:"",width:"150px",formatter:t.getEndTime}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.workDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1)],1)},staticRenderFns:[]};var ra=n("VU/8")(sa,ia,!1,function(t){n("PV82")},null,null).exports,oa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"left"},[t._v(t._s(t.index)+".【"+t._s(t.data.score)+"】")]),t._v(" "),n("div",{staticClass:"right"},[n("show-text",{staticClass:"content",attrs:{data:t.data.q_description}}),t._v(" "),t.data.q_type<3?n("div",{staticClass:"altertive-answer"},t._l(t.value,function(e,a){return n("div",{key:a},[n("el-checkbox",{attrs:{disabled:"watch"==t.action},model:{value:t.value[a],callback:function(e){t.$set(t.value,a,e)},expression:"value[index]"}},[t._v(t._s(String.fromCharCode(65+a))+"."+t._s(t.data.alternative_answer[a]))])],1)}),0):3==t.data.q_type?n("div",t._l(t.value,function(e,a){return n("el-input",{key:e.ql_id,staticStyle:{width:"150px","border-bottom":"2px solid black"},attrs:{disabled:"watch"==t.action,type:"text"},model:{value:t.value[a],callback:function(e){t.$set(t.value,a,e)},expression:"value[index]"}})}),1):4==t.data.q_type&&void 0!=t.value?n("div",[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"选择语言",disabled:"watch"==t.action},model:{value:t.value[0],callback:function(e){t.$set(t.value,0,e)},expression:"value[0]"}},[n("el-option",{attrs:{label:"java",value:"java"}}),t._v(" "),n("el-option",{attrs:{label:"c++",value:"cpp"}}),t._v(" "),n("el-option",{attrs:{label:"c",value:"c"}}),t._v(" "),n("el-option",{attrs:{label:"python2",value:"py2"}}),t._v(" "),n("el-option",{attrs:{label:"python3",value:"py3"}})],1),t._v(" "),n("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",rows:14,disabled:"watch"==t.action},model:{value:t.value[1],callback:function(e){t.$set(t.value,1,e)},expression:"value[1]"}})],1):t._e()],1),t._v(" "),"watch"==t.action?n("div",{staticClass:"sum"},[1===t.sum?n("i",{staticClass:"el-icon-check primary"}):n("i",{staticClass:"el-icon-close warning"})]):t._e()])},staticRenderFns:[]};var la={name:"DoTest",components:{DoQuestion:n("VU/8")({props:["data","value","index","action","sum"],name:"DoQuestion",created:function(){this.data.q_description=this.data.q_description.replace(/\[blank_space\]/g,"<span class='blank'></span>")}},oa,!1,function(t){n("xa6X")},"data-v-7523c17c",null).exports},props:["type"],data:function(){return{u_id:"",c_id:"",test_id:"",isFailed:!1,isLoading:!0,action:"",isSubmit:"",startTime:0,endTime:0,answers:{},sum:{},data:{},moment:"",mm:0,ss:0,timer:null}},created:function(){this.moment=this.$moment,this.u_id=getClientUserInfo().u_id,this.c_id=this.$route.params.c_id,this.test_id=this.$route.params.test_id,this.action=this.$route.query.action,this.isSubmit="yes"==this.$route.query.isSubmit;try{this.endTime=parseInt(this.$route.query.endTime),this.startTime=parseInt(this.$route.query.startTime)}catch(t){}this.getQuestion()},methods:{getQuestion:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/test/"+this.test_id+"/detail").then(function(e){"do"==t.action&&2==t.type&&(t.timer=setInterval(t.startCountdown,1e3)),e.single.forEach(function(t){t.alternative_answer=JSON.parse(t.alternative_answer)}),e.mult.forEach(function(t){t.alternative_answer=JSON.parse(t.alternative_answer)}),t.data=e,t.getAnswer(),t.isLoading=!1}).catch(function(e){console.error(e),t.isFailed=!0,t.isLoading=!1})},startCountdown:function(){var t=Date.now(),e=this.endTime-t;e<0?(clearInterval(this.timer),alertMessage("已到结束数据，自动提交"),this.submit()):(this.mm=Math.round(e/1e3/60),this.ss=Math.round(e%6e4/1e3))},getAnswer:function(){var t=this;"watch"==this.action&&this.isSubmit?$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/test/"+this.test_id+"/answer").then(function(e){t.answers=JSON.parse(e.answer),t.sum=JSON.parse(e.sum)}):(this.data.single.forEach(function(e){var n=new Array(e.alternative_answer.length);n.fill(!1),t.$set(t.answers,e.ql_id,n)}),this.data.mult.forEach(function(e){var n=new Array(e.alternative_answer.length);n.fill(!1),t.$set(t.answers,e.ql_id,n)}),this.data.program.forEach(function(e){return t.$set(t.answers,e.ql_id,["java",""])}),this.data.gap.forEach(function(e){var n=e.q_description.match(/\[blank_space\]/g).length,a=new Array(n);a.fill(""),t.$set(t.answers,e.ql_id,a)}))},submitConfirm:function(){var t=this;alertConfirm("确认提交吗（提交后无法修改）？").then(function(){t.submit()})},submit:function(){var t=this;$httpc.put("/user/"+this.u_id+"/course/"+this.c_id+"/test/"+this.test_id+"/submit_answer",{answer:this.answers}).then(function(e){alertMessage("提交成功","success"),t.$router.replace(".")})}}},ca={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[0==t.isFailed?n("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{accordion:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t.data.single.length>0?n("el-collapse-item",{attrs:{name:"1"}},[n("template",{slot:"title"},[n("h3",[t._v(" "),n("i",{staticClass:"el-icon-caret-right"}),t._v("单选题")])]),t._v(" "),t._l(t.data.single,function(e,a){return n("do-question",{key:a,attrs:{index:a+1,data:e,value:t.answers[e.ql_id],sum:t.sum[e.ql_id],action:t.action}})})],2):t._e(),t._v(" "),t.data.mult.length>0?n("el-collapse-item",{attrs:{name:"2"}},[n("template",{slot:"title"},[n("h3",[t._v(" "),n("i",{staticClass:"el-icon-caret-right"}),t._v("多选题")])]),t._v(" "),t._l(t.data.mult,function(e,a){return n("do-question",{key:a,attrs:{index:a+1,data:e,value:t.answers[e.ql_id],sum:t.sum[e.ql_id],action:t.action}})})],2):t._e(),t._v(" "),t.data.gap.length>0?n("el-collapse-item",{attrs:{name:"3"}},[n("template",{slot:"title"},[n("h3",[t._v(" "),n("i",{staticClass:"el-icon-caret-right"}),t._v("填空题")])]),t._v(" "),t._l(t.data.gap,function(e,a){return n("do-question",{key:a,attrs:{index:a+1,data:e,value:t.answers[e.ql_id],sum:t.sum[e.ql_id],action:t.action}})})],2):t._e(),t._v(" "),t.data.program.length>0?n("el-collapse-item",{attrs:{name:"4"}},[n("template",{slot:"title"},[n("h3",[t._v(" "),n("i",{staticClass:"el-icon-caret-right"}),t._v("编程题")])]),t._v(" "),t._l(t.data.program,function(e,a){return n("do-question",{key:a,attrs:{index:a+1,data:e,value:t.answers[e.ql_id],sum:t.sum[e.ql_id],action:t.action}})})],2):t._e()],1):n("div",{staticStyle:{"text-align":"center"}},[t._v("\n    无法获取题目\n  ")]),t._v(" "),"do"==t.action&&0==t.isFailed?n("div",{staticClass:"all-item-hcenter",staticStyle:{"margin-top":"40px"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitConfirm}},[t._v("提交")])],1):t._e(),t._v(" "),2==t.type&&"do"==t.action&&0==t.isFailed&&0==t.isLoading?n("div",{staticClass:"count-down"},[t._v("\n    结束时间："+t._s(t.moment(t.endTime).format("HH:mm"))),n("br"),t._v(" 还有："+t._s(t.mm)+"分"+t._s(t.ss)+"秒\n  ")]):t._e()],1)},staticRenderFns:[]};var ua=n("VU/8")(la,ca,!1,function(t){n("F6I6")},"data-v-2ae5bd80",null).exports,da={name:"WorkDetail",components:{DoTest:ua},data:function(){return{action:""}},created:function(){this.action=this.$route.query.action}},ma={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:[["watch"==this.action?"历史作业":"当前作业","."],"作业详情"]}}),this._v(" "),e("do-test",{ref:"doTest",attrs:{type:"1"}})],1)},staticRenderFns:[]};var pa=n("VU/8")(da,ma,!1,function(t){n("tB+E")},"data-v-2ae6681e",null).exports,ha={name:"CurrentWork",data:function(){return{workList:[],moment:""}},created:function(){var t=this;this.moment=this.$moment;var e=getClientUserInfo().u_id,n=this.$route.params.c_id;$httpc.get("/user/"+e+"/course/"+n+"/test?type=2&isCurrent=true").then(function(e){t.workList=e})},methods:{getStartTime:function(t){return this.$moment(t.start_time).format("YYYY-MM-DD HH:mm")},getEndTime:function(t){return this.$moment(t.end_time).format("YYYY-MM-DD HH:mm")},workDetail:function(t){t.start_time>Date.now()?alertMessage("考试还未开始,请等待","warning"):this.$router.push("current_exam/"+t.test_id+"?action=do&startTime="+t.start_time+"&endTime="+t.end_time)}}},fa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["当前考试"]}}),t._v(" "),n("div",[n("el-table",{attrs:{data:t.workList,width:"100%","default-sort":{prop:"end_time",order:"descending"}}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"test_name",sortable:"",label:"考试名称","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"demand",label:"要求","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"start_time",sortable:"",width:"150px",formatter:t.getStartTime}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"end_time",sortable:"",width:"150px",formatter:t.getEndTime}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.workDetail(e.row)}}},[t._v("开始")])]}}])})],1)],1)],1)},staticRenderFns:[]};var _a=n("VU/8")(ha,fa,!1,function(t){n("jwZe")},null,null).exports,va={name:"LastWork",data:function(){return{workList:[],moment:""}},created:function(){var t=this;this.moment=this.$moment;var e=getClientUserInfo().u_id,n=this.$route.params.c_id;$httpc.get("/user/"+e+"/course/"+n+"/test?type=2&isCurrent=false").then(function(e){t.workList=e})},methods:{getStartTime:function(t){return this.$moment(t.start_time).format("YYYY-MM-DD HH:mm")},getEndTime:function(t){return this.$moment(t.end_time).format("YYYY-MM-DD HH:mm")},getScore:function(t){return null==t.score?"无":t.score},workDetail:function(t){this.$router.push("last_exam/"+t.test_id+"?action=watch&isSubmit="+(0==t.submit_time?"no":"yes"))}}},ga={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["历史考试"]}}),t._v(" "),n("div",[n("el-table",{attrs:{data:t.workList,width:"100%","default-sort":{prop:"end_time",order:"descending"}}},[n("el-table-column",{attrs:{type:"index",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"test_name",sortable:"",label:"考试名称","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"demand",label:"要求","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.submit_time?n("el-tag",{attrs:{type:"danger"}},[t._v("未提交")]):n("el-tag",{attrs:{type:"success"}},[t._v("已提交")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"成绩",prop:"score",sortable:"",width:"80px",formatter:t.getScore}}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"start_time",sortable:"",width:"150px",formatter:t.getStartTime}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"end_time",sortable:"",width:"150px",formatter:t.getEndTime}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.workDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1)],1)},staticRenderFns:[]};var ba=n("VU/8")(va,ga,!1,function(t){n("jCaR")},null,null).exports,wa={name:"WorkDetail",components:{DoTest:ua},data:function(){return{action:""}},created:function(){this.action=this.$route.query.action}},xa={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:[["watch"==this.action?"历史考试":"当前考试","."],"考试详情"]}}),this._v(" "),e("do-test",{ref:"doTest",attrs:{type:"2"}})],1)},staticRenderFns:[]},ya=n("VU/8")(wa,xa,!1,null,null,null).exports,ka={name:"StudentBadge",props:["data"],components:{Badge:Cn},data:function(){return{badgeList:[]}},computed:{showBadge:function(){return this.badgeList.slice(0,3)}},created:function(){this.getData()},methods:{getData:function(){var t=this;$httpc.get("/user/"+this.data.u_id+"/badge").then(function(e){t.badgeList=e})}}},Ca={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-item-vcenter"},[n("el-popover",{attrs:{placement:"top",trigger:"hover",width:"200"}},[n("span",[t._v("已获得徽章总数:"+t._s(t.badgeList.length))]),t._v(" "),n("div",{staticClass:"show-badge"},t._l(t.badgeList,function(t){return n("badge",{key:t.b_id,staticStyle:{"margin-right":"5px","margin-bottom":"5px"},attrs:{data:t}})}),1),t._v(" "),n("div",{staticClass:"all-item-vcenter",attrs:{slot:"reference"},slot:"reference"},[n("span",[t._v(t._s(t.data.u_name))]),t._v(" "),t._l(t.showBadge,function(t){return n("img",{key:t.b_id,staticClass:"small-badge",attrs:{src:t.b_img}})})],2)])],1)},staticRenderFns:[]};var $a=n("VU/8")(ka,Ca,!1,function(t){n("LEdF")},"data-v-36cc3373",null).exports,Da={name:"EvaluateList",components:{StudentBadge:$a},data:function(){return{c_id:"",u_id:"",dataList:[],evaluate:-1}},computed:{myRank:function(){var t=this,e=this.dataList.findIndex(function(e){return e.u_id==t.u_id});return-1==e?"未上榜":e+1}},mounted:function(){this.c_id=this.$route.params.c_id,this.u_id=getClientUserInfo().u_id,this.getList(),this.getEvaluate()},methods:{getList:function(){var t=this;$httpc.get("/course/"+this.c_id+"/top30?type=evaluate").then(function(e){t.dataList=e})},getEvaluate:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/rank?type=evaluate").then(function(e){t.evaluate=e})}}},Sa={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["实力排行"]}}),t._v(" "),n("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("我的排名："+t._s(t.myRank))]),t._v(" "),n("el-table",{attrs:{data:t.dataList,width:"100%"}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("student-badge",{attrs:{data:t.row}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"班级",formatter:function(t){return t.grade_name+"-"+t.class_name}}}),t._v(" "),n("el-table-column",{attrs:{prop:"evaluate",label:"水平值",fixed:"right",width:"150px"}})],1)],1)},staticRenderFns:[]};var qa=n("VU/8")(Da,Sa,!1,function(t){n("ABc/")},null,null).exports,Ia={name:"EvaluateList",components:{StudentBadge:$a},data:function(){return{c_id:"",u_id:"",dataList:[],coverage:-1,isLoad:0}},computed:{myRank:function(){var t=this,e=this.dataList.findIndex(function(e){return e.u_id==t.u_id});return-1==e?"未上榜":e+1+"("+100*this.coverage+"%)"}},mounted:function(){this.c_id=this.$route.params.c_id,this.u_id=getClientUserInfo().u_id,this.getList(),this.getCoverage()},methods:{getList:function(){var t=this;$httpc.get("/course/"+this.c_id+"/top30?type=coverage").then(function(e){t.dataList=e})},getCoverage:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/rank?type=coverage").then(function(e){t.coverage=e})}}},Ea={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["知识点覆盖率排行"]}}),t._v(" "),n("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("我的排名："+t._s(t.myRank))]),t._v(" "),n("el-table",{attrs:{data:t.dataList,width:"100%"}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("student-badge",{attrs:{data:t.row}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"班级",formatter:function(t){return t.grade_name+"-"+t.class_name}}}),t._v(" "),n("el-table-column",{attrs:{prop:"coverage",label:"覆盖率",fixed:"right",width:"70px",formatter:function(t){return 100*t.coverage+"%"}}})],1)],1)},staticRenderFns:[]};var Ta=n("VU/8")(Ia,Ea,!1,function(t){n("aumw")},null,null).exports,Ua={name:"knowledgePointView",data:function(){return{c_id:"",u_id:"",pointData:[],studentData:[],tooltip:"某知识点做题数达到5题，且正确率达到80%，认为已掌握",coverage:"",isLoad:0,currentKpData:{},isShow:!1,isParamShow:!1,form:{knowledgePoint:[],kp_name:"",allScore:0,question:{single:{num:"2",score:"5"},mult:{num:"2",score:"5"},gap:{num:"2",score:"5"},program:{num:"1",score:"20"}}},defaultProps:{children:"children",label:"label"}}},computed:{rightPrecent:function(){return 0==this.currentKpData.count?0:(this.currentKpData.right_count/this.currentKpData.count*100).toFixed(1)+"%"},allScore:function(){var t=0;for(var e in this.form.question)t+=parseInt(this.form.question[e].num)*parseInt(this.form.question[e].score);return this.form.allScore=t,t}},created:function(){this.c_id=this.$route.params.c_id,this.u_id=getClientUserInfo().u_id,this.getPointData(),this.getStudentData(),this.getCoverage()},methods:{getPointData:function(){var t=this;$httpc.get("/course/"+this.c_id+"/knowledge_point_tree").then(function(e){t.pointData=e.children,t.isLoad++})},getCoverage:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/rank?type=coverage").then(function(e){t.coverage=e})},getStudentData:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/knowledge_point/condition").then(function(e){var n={};e.forEach(function(t){return n[t.kp_id]={count:t.count,right_count:t.right_count}}),t.studentData=n,t.isLoad++})},handleClick:function(t){3==t.level?(this.isShow=!0,this.form.knowledgePoint=[t.id],this.form.kp_name=t.label,void 0==this.studentData[t.id]?this.currentKpData={count:0,right_count:0}:this.currentKpData=this.studentData[t.id]):this.isShow=!1},submit:function(){var t=this;alertConfirm("确认提交？").then(function(){$httpc.post("/user/"+t.u_id+"/course/"+t.c_id+"/test",t.form).then(function(e){alertMessage("提交成功","success"),t.$router.push("history")})})}}},Ma={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["知识点总览"]}}),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:2!=t.isLoad,expression:"isLoad!=2"}],staticClass:"app",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-tooltip",{attrs:{effect:"dark",content:t.tooltip,placement:"right"}},[n("span",[t._v("我的覆盖率："+t._s(100*t.coverage+"%"))])]),t._v(" "),n("el-tree",{staticStyle:{"margin-top":"5px"},attrs:{data:t.pointData,props:t.defaultProps,"highlight-current":"",accordion:""},on:{"node-click":t.handleClick}}),t._v(" "),t.isShow?n("div",[t._v("\n      做题数："+t._s(t.currentKpData.count)+" 正确数："+t._s(t.currentKpData.right_count)+" 正确率："+t._s(t.rightPrecent)+"\n      "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.isParamShow=!0}}},[t._v("专项练习")])],1):t._e(),t._v(" "),t.isParamShow?n("div",[n("div",[t._v("\n        单选题：\n        "),n("el-input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:t.form.question.single.num,callback:function(e){t.$set(t.form.question.single,"num",e)},expression:"form.question.single.num"}}),t._v("道\n      ")],1),t._v(" "),n("div",[t._v("\n        多选题：\n        "),n("el-input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:t.form.question.mult.num,callback:function(e){t.$set(t.form.question.mult,"num",e)},expression:"form.question.mult.num"}}),t._v("道\n      ")],1),t._v(" "),n("div",[t._v("\n        填空题：\n        "),n("el-input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:t.form.question.gap.num,callback:function(e){t.$set(t.form.question.gap,"num",e)},expression:"form.question.gap.num"}}),t._v("道\n      ")],1),t._v(" "),n("div",[t._v("\n        编程题：\n        "),n("el-input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:t.form.question.program.num,callback:function(e){t.$set(t.form.question.program,"num",e)},expression:"form.question.program.num"}}),t._v("道\n      ")],1),t._v("\n      总分："+t._s(t.allScore)+"\n      "),n("div",{staticClass:"all-item-hcenter"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)]):t._e()],1)],1)},staticRenderFns:[]};var za=n("VU/8")(Ua,Ma,!1,function(t){n("5FpU")},"data-v-2dff609b",null).exports,Fa={name:"knowledgePointHistory",data:function(){return{u_id:"",c_id:"",undoTest:0,doneTest:[]}},created:function(){this.u_id=getClientUserInfo().u_id,this.c_id=this.$route.params.c_id,this.getData()},methods:{getData:function(){var t=this;$httpc.get("/user/"+this.u_id+"/course/"+this.c_id+"/knowledge_test").then(function(e){var n=e.findIndex(function(t){return 0==t.submit_time});-1!=n&&(t.undoTest=e[n],e.splice(n,1)),t.doneTest=e})},giveup:function(){var t=this;$httpc.delete("/user/"+this.u_id+"/course/"+this.c_id+"/test/"+this.undoTest.test_id+"/knowledge").then(function(e){alertMessage("成功放弃","success"),t.undoTest=0})}}},Ra={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("breadcrumb",{attrs:{data:["专项练习"]}}),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n    待完成练习：\n    "),0!=e.undoTest?a("span",[a("router-link",{attrs:{to:"history/"+e.undoTest.test_id+"?action=do"}},[e._v("\n        "+e._s(e.undoTest.test_name)+"\n      ")]),e._v(" "),a("span",{staticClass:"warning pointer",on:{click:e.giveup}},[e._v("放弃")])],1):a("router-link",{attrs:{to:"overview"}},[e._v("\n      无\n    ")])],1),e._v(" "),a("el-table",{attrs:{data:e.doneTest,"default-sort":{prop:"start_time",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"test_name",label:"练习名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"得分",width:"100px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"创建时间",sortable:"",width:"150px",formatter:function(e){return t.$moment(e.start_time).format("YYYY-MM-DD HH:mm:ss")}}}),e._v(" "),a("el-table-column",{attrs:{prop:"submit_time",label:"完成时间",width:"150px",formatter:function(e){return t.$moment(e.submit_time).format("YYYY-MM-DD HH:mm:ss")}}}),e._v(" "),a("el-table-column",{attrs:{prop:"操作",fixed:"right",label:"操作",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"history/"+t.row.test_id+"?action=watch&isSubmit=yes"}},[e._v("查看")])]}}])})],1)],1)},staticRenderFns:[]};var Na=n("VU/8")(Fa,Ra,!1,function(t){n("6zVs")},null,null).exports,ja={name:"DoKnowledgeTest",components:{DoTest:ua}},Va={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("breadcrumb",{attrs:{data:[["专项练习","."],"完成练习"]}}),this._v(" "),e("do-test",{attrs:{type:"3"}})],1)},staticRenderFns:[]};var Aa=n("VU/8")(ja,Va,!1,function(t){n("OzLp")},null,null).exports,Pa={name:"NewQuestionAnswer",components:{StudentBadge:$a},data:function(){return{form:{id:"",topic:"",c_id:""},class_id:"",teachers:[],tree:[],studnet:[]}},created:function(){this.form.c_id=this.$route.params.c_id,this.getTeacher(),this.getTree()},methods:{reset:function(){this.form.id="",this.$refs.table.store.states.currentRow=null},getTeacher:function(){var t=this;$httpc.get("/course/"+this.form.c_id+"/teacher").then(function(e){t.teachers=e})},getTree:function(){var t=this;$httpc.get("/course/tree?c_id="+this.form.c_id).then(function(e){t.tree=e.children})},getClass:function(){var t=this;$httpc.get("/class/"+this.class_id+"/user").then(function(e){t.studnet=e})},nodeClick:function(t){3==t.level?(this.class_id=t.id,this.getClass()):this.class_id=""},studentChange:function(t){this.form.id=null!=t?t.u_id:""},submit:function(){var t=this;""!=this.form.id?""!=this.form.topic?$httpc.post("/question_answer",this.form).then(function(e){alertMessage("操作成功","success"),t.$router.push("./current")}):alertMessage("请输入主题","warning"):alertMessage("请选择对象","warning")}}},La={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["新的答疑"]}}),t._v(" "),n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.reset}},[n("el-tab-pane",{attrs:{label:"向老师提问"}},[n("div",{staticClass:"content"},[t._l(t.teachers,function(e){return n("el-button",{key:e.u_id,attrs:{type:t.form.id==e.u_id?"warning":"",round:""},on:{click:function(n){t.form.id=e.u_id}}},[t._v(t._s(e.u_name))])}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.id,expression:"form.id!=''"}],staticClass:"center",staticStyle:{width:"500px","text-align":"center"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入主题"},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}}),t._v(" "),n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)],2)]),t._v(" "),n("el-tab-pane",{attrs:{label:"向同学提问"}},[n("div",{staticClass:"all-item-around",staticStyle:{"min-height":"300px","margin-bottom":"20px"}},[n("el-tree",{staticStyle:{width:"300px"},attrs:{data:t.tree,"highlight-current":"",accordion:""},on:{"node-click":t.nodeClick}}),t._v(" "),n("div",{staticStyle:{width:"500px"}},[n("el-table",{directives:[{name:"show",rawName:"v-show",value:""!=t.class_id,expression:"class_id!=''"}],ref:"table",attrs:{data:t.studnet,"highlight-current-row":"","max-height":"500px"},on:{"current-change":t.studentChange}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"u_name",label:"姓名",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[n("student-badge",{attrs:{data:t.row}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"evaluate",label:"水平值",sortable:""}})],1)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.form.id,expression:"form.id!=''"}],staticClass:"center",staticStyle:{width:"500px","text-align":"center"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入主题"},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}}),t._v(" "),n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)])],1)],1)},staticRenderFns:[]};var Oa=n("VU/8")(Pa,La,!1,function(t){n("UEG9")},null,null).exports,Qa={name:"MessageList",props:["data"],data:function(){return{current:null,u_id:""}},components:{StudentBadge:$a},created:function(){this.u_id=getClientUserInfo().u_id,this.$watch("data",this.init),this.init()},methods:{init:function(){var t=this;this.data.forEach(function(e){e!=t.current&&(e.start_u_id==t.u_id?t.$set(e,"type","start"):t.$set(e,"type","reply"))})},change:function(t){this.current!==t&&(this.$emit("change",t),this.current=t,t.hasNew=0,"start"==t.type?t.is_new_reply=0:t.is_new_question=0)}}},Ya={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[t._l(t.data,function(e){return n("div",{key:e.qa_id,staticClass:"item all-item-between all-item-vcenter",class:{active:null!=t.current&&e.qa_id==t.current.qa_id},on:{click:function(n){return t.change(e)}}},[n("div",{staticStyle:{width:"170px",overflow:"hidden"}},["start"==e.type?n("student-badge",{attrs:{data:{u_id:e.reply_u_id,u_name:e.reply_u_name}}}):n("student-badge",{attrs:{data:{u_id:e.start_u_id,u_name:e.start_u_name}}}),t._v("\n      topic:"+t._s(e.topic)+"\n    ")],1),t._v(" "),"start"==e.type&&1==e.is_new_reply||"reply"==e.type&&1==e.is_new_question?n("span",{staticClass:"dot"}):t._e()])}),t._v(" "),0==t.data.length?n("div",[t._v("\n    当前尚无数据\n  ")]):t._e()],2)},staticRenderFns:[]};var Ha=n("VU/8")(Qa,Ya,!1,function(t){n("PLM7")},"data-v-0dad5308",null).exports,Ga={name:"MessageDetail",props:["data"],data:function(){return{MessageData:[],lastUpdateTime:0,timer:null,isGettingData:!1,u_id:"",type:"",contentDiv:null,otherUserIcon:"",userIcon:"",form:{content:""}}},created:function(){this.$watch("data",this.init);var t=getClientUserInfo();this.u_id=t.u_id,this.userIcon=t.icon,this.init()},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{init:function(){var t=this;null!=this.data?(this.data.start_u_id==this.u_id?this.type="start":this.type="reply",this.contentDiv=document.getElementById("content"),this.MessageData=[],this.lastUpdateTime=0,this.isGettingData=!1,this.getData(),1!==this.data.is_closed&&(this.timer=setInterval(function(){t.getNewMessage()},1e3))):null!=this.timer&&clearInterval(this.timer)},getData:function(){var t=this;this.isGettingData=!0,$httpc.get("question_answer/"+this.data.qa_id+"/detail?time="+this.lastUpdateTime+"&type="+this.type).then(function(e){e.length>0&&(t.MessageData=e,t.lastUpdateTime=e[e.length-1].send_time),t.isGettingData=!1,t.scrollBottom()}),$httpc.get("user/"+("start"==this.type?this.data.reply_u_id:this.data.start_u_id)).then(function(e){t.otherUserIcon=e.icon})},scrollBottom:function(){var t=this;this.$nextTick(function(){t.contentDiv.scrollTop=t.contentDiv.scrollHeight})},getNewMessage:function(){var t=this;if(!this.isGettingData){this.isGettingData=!0;var e=this.data.qa_id;$httpc.get("question_answer/"+this.data.qa_id+"/detail?time="+this.lastUpdateTime+"&type="+this.type).then(function(n){if(n.length>0&&t.data.qa_id==e){for(var a=0;a<n.length;a++)t.MessageData.push(n[a]);t.lastUpdateTime=n[n.length-1].send_time,t.scrollBottom()}t.isGettingData=!1}).catch(function(e){t.isGettingData=!1})}},sendData:function(){var t=this;$httpc.post("/question_answer/"+this.data.qa_id+"/question_answer_detail",this.form).then(function(e){t.form.content=""})},close:function(){var t=this;alertConfirm("确定关闭本答疑？（关闭后双方无法再次回复）").then(function(){$httpc.put("/question_answer/"+t.data.qa_id+"/close",{start_u_id:t.data.start_u_id}).then(function(e){alertMessage("关闭成功","success"),t.$emit("closeMessage"),t.data.is_closed=1})})}}},Ba={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"content",attrs:{id:"content"}},[t._l(t.MessageData,function(e,a){return[e.u_id!=t.u_id?n("div",{key:a,staticClass:"item"},[n("img",{staticClass:"head-img",attrs:{src:t.otherUserIcon}}),t._v(" "),n("show-text",{staticClass:"text",attrs:{data:e.content}})],1):n("div",{key:a,staticClass:"right item"},[n("show-text",{staticClass:"text",attrs:{data:e.content}}),t._v(" "),n("img",{staticClass:"head-img",attrs:{src:t.userIcon}})],1)]})],2),t._v(" "),null!=t.data&&0===t.data.is_closed?n("div",{staticClass:"bottom"},[n("editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),n("div",{staticClass:"action"},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.close}},[t._v("关闭答疑")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sendData}},[t._v("发送")])],1)],1):t._e()])},staticRenderFns:[]};var Wa=n("VU/8")(Ga,Ba,!1,function(t){n("7kgF")},"data-v-4d75b3ca",null).exports,Ka={name:"CurrentQuestionAnswer",components:{MessageList:Ha,MessageDetail:Wa},data:function(){return{dataList:[],currentMessage:null,c_id:"",u_id:"",timer:null,isGettingData:!1}},created:function(){var t=this;this.c_id=this.$route.params.c_id,this.u_id=getUserInfo().u_id,this.getData(),this.timer=setInterval(function(){t.getData()},4e3)},destroyed:function(){null!=this.timer&&clearInterval(this.timer)},methods:{getData:function(){var t=this;this.isGettingData||(this.isGettingData=!0,$httpc.get("/question_answer?c_id="+this.c_id+"&type=all&is_closed=0").then(function(e){(e.sort(function(t,e){return e.create_time-t.create_time}),null!=t.currentMessage)&&(-1==e.findIndex(function(e){return e.qa_id==t.currentMessage.qa_id})&&(t.currentMessage=null));t.dataList=e,t.isGettingData=!1}).catch(function(e){return t.isGettingData=!1}))}}},Ja={render:function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("breadcrumb",{attrs:{data:["当前答疑"]}}),e._v(" "),a("div",{staticClass:"all-item-between"},[a("message-list",{attrs:{data:e.dataList},on:{change:function(e){return t.currentMessage=e}}}),e._v(" "),a("message-detail",{directives:[{name:"show",rawName:"v-show",value:null!=e.currentMessage,expression:"currentMessage!=null"}],attrs:{data:e.currentMessage},on:{closeMessage:function(t){e.currentMessage=null}}})],1)],1)},staticRenderFns:[]};var Za={name:"QuestionAnswerHistory",components:{MessageList:Ha,MessageDetail:Wa},data:function(){return{dataList:[],currentMessage:null,c_id:"",u_id:""}},created:function(){this.c_id=this.$route.params.c_id,this.u_id=getUserInfo().u_id,this.getData()},methods:{getData:function(){var t=this;$httpc.get("/question_answer?c_id="+this.c_id+"&type=all&is_closed=1").then(function(e){e.sort(function(t,e){return e.create_time-t.create_time}),t.dataList=e})}}},Xa={render:function(){var t=this,e=this.$createElement,n=this._self._c||e;return n("div",[n("breadcrumb",{attrs:{data:["历史答疑"]}}),this._v(" "),n("div",{staticClass:"all-item-between"},[n("message-list",{attrs:{data:this.dataList},on:{change:function(e){return t.currentMessage=e}}}),this._v(" "),n("message-detail",{directives:[{name:"show",rawName:"v-show",value:null!=this.currentMessage,expression:"currentMessage!=null"}],attrs:{data:this.currentMessage}})],1)],1)},staticRenderFns:[]};var ts={path:"/client",component:bn,beforeEnter:function(t,e,n){null==getClientUserInfo()?n({path:"/public/client_login",replace:!0}):n()},children:[{path:"",name:"ClientMain",component:Sn},{path:"person/student_info",name:"StudentInfo",component:Mn},{path:"course/:c_id/announcement",name:"Main",component:En},{path:"course/:c_id/base",component:xn,children:[{path:"course_intro",name:"ClientCourseIntro",component:Rn},{path:"exam_type",name:"ClientExamType",component:Vn},{path:"first_course",name:"ClientFirstCourse",component:Ln},{path:"reference_book",name:"ClientReferenceBook",component:Yn},{path:"teacher_intro",name:"ClientTeacherIntro",component:Bn},{path:"teach_plan",name:"ClientTeachPlan",component:Jn},{path:"courseware",name:"ClientCourseware",component:ta}]},{path:"course/:c_id/knowledge_point",component:xn,children:[{path:"overview",name:"KnowledgePointView",component:za},{path:"history",name:"KnowledgePointHistory",component:Na},{path:"history/:test_id",name:"KnowledgeTestDetail",component:Aa}]},{path:"course/:c_id/work",component:xn,children:[{path:"current_work",name:"CurrentWork",component:aa},{path:"last_work",name:"LastWork",component:ra},{path:"current_work/:test_id",name:"WorkDetail",component:pa},{path:"last_work/:test_id",name:"WorkDetail",component:pa}]},{path:"course/:c_id/exam",component:xn,children:[{path:"current_exam",name:"CurrentExam",component:_a},{path:"last_exam",name:"LastExam",component:ba},{path:"current_exam/:test_id",name:"ExamDetail",component:ya},{path:"last_exam/:test_id",name:"ExamDetail",component:ya}]},{path:"course/:c_id/rank_list",component:xn,children:[{path:"evaluate",name:"EvaluateList",component:qa},{path:"coverage",name:"CoverageList",component:Ta}]},{path:"course/:c_id/question_answer",component:xn,children:[{path:"new",name:"NewQuestionAnswer",component:Oa},{path:"current",name:"CurrentQuestionAnswer",component:n("VU/8")(Ka,Ja,!1,function(t){n("yWII")},null,null).exports},{path:"historyqa",name:"QuestionAnswerHistory",component:n("VU/8")(Za,Xa,!1,function(t){n("Qf9m")},null,null).exports}]}]},es={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app all-item-vcenter all-item-hcenter"},[e("h1",[this._v("您访问的页面不存在\n  "),e("el-button",{attrs:{type:"text"},on:{click:this.back}},[this._v("点击返回")])],1)])},staticRenderFns:[]};var ns=n("VU/8")({name:"Error404",methods:{back:function(){this.$router.go(-1)}}},es,!1,function(t){n("73Vq")},"data-v-0bfc7616",null).exports,as={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("h3",[e("router-link",{attrs:{to:"/client",replace:!1}},[this._v("客户端")])],1),this._v(" "),e("h3",[e("router-link",{attrs:{to:"/admin",replace:!1}},[this._v("管理端")])],1)])},staticRenderFns:[]};var ss=n("VU/8")({name:"IndexPage"},as,!1,function(t){n("aqBI")},"data-v-352c8ae7",null).exports;a.default.use(r.a);var is=new r.a({mode:"history",base:"/app/",routes:[{path:"",name:"indexPage",component:ss},{path:"/about",name:"about",component:b},hn,ts,w,{path:"*",name:"NotFound",component:ns}]}),rs=n("zL8q"),os=n.n(rs),ls=n("PJh5"),cs=n.n(ls),us=(n("tvR6"),n("sYY+")),ds=n.n(us),ms={name:"Editor",props:["value"],data:function(){return{editor:{},content:this.value,currentNum:0}},watch:{value:function(t){this.currentNum=this.editor.txt.text().length,t!==this.content&&this.editor.txt.html(t)}},mounted:function(){var t=this,e=new ds.a(this.$refs.editor);e.customConfig.zIndex=1,e.customConfig.onchange=function(e){t.content=e,t.$emit("input",e)},e.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","image","table","code","undo","redo"],e.customConfig.uploadImgServer="/api/v1/public/img_upload";var n=void 0;n=this.$route.path.startsWith("/admin/")?getToken():getClientToken(),e.customConfig.uploadImgHeaders={Authorization:n},e.create(),e.txt.html(this.content),this.currentNum=e.txt.text().length,this.editor=e},methods:{getText:function(){return this.editor.txt.text()}}},ps={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"line-height":"30px","margin-bottom":"30px",position:"relative"}},[e("div",{staticClass:"word-num"},[this._v("您已输入"+this._s(this.currentNum)+"字,最多可输入5000")]),this._v(" "),e("div",{ref:"editor"})])},staticRenderFns:[]};var hs=n("VU/8")(ms,ps,!1,function(t){n("3R+y")},"data-v-69da1303",null).exports,fs={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{domProps:{innerHTML:this._s(this.data)}})},staticRenderFns:[]};var _s=n("VU/8")({name:"ShowText",props:["data"]},fs,!1,function(t){n("HbVb")},null,null).exports,vs={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/client/course/"+t.c_id+"/announcement"}}},[t._v("课程首页")]),t._v(" "),t._l(t.data,function(e,a){return["object"==typeof e?n("el-breadcrumb-item",{key:a,attrs:{to:{path:e[1]}}},[t._v(t._s(e[0]))]):n("el-breadcrumb-item",{key:a},[t._v(t._s(e))])]})],2)},staticRenderFns:[]};var gs=n("VU/8")({name:"Breadcrumb",props:["data"],data:function(){return{c_id:""}},watch:{"$route.params.c_id":function(t){this.c_id=t}},created:function(){this.c_id=this.$route.params.c_id}},vs,!1,function(t){n("1980")},null,null).exports;a.default.component("Editor",hs),a.default.component("ShowText",_s),a.default.component("Breadcrumb",gs),Object.defineProperty(a.default.prototype,"$moment",{value:cs.a}),a.default.config.productionTip=!1,a.default.use(os.a),window.bus=new a.default,window.vm=new a.default({el:"#app",router:is,components:{App:i},template:"<App/>"}),console.log("vue示例构建完毕")},NvPD:function(t,e){},O7Up:function(t,e){},OzLp:function(t,e){},PGfL:function(t,e){},PLM7:function(t,e){},PV82:function(t,e){},PaPP:function(t,e){},Qf9m:function(t,e){},TFUh:function(t,e){},U56M:function(t,e){},UEG9:function(t,e){},URif:function(t,e){},Ulp4:function(t,e){},Unk2:function(t,e){},UtTI:function(t,e){},VcG5:function(t,e){},Vjyw:function(t,e){},VpQ7:function(t,e){},Vqxk:function(t,e){},WoWk:function(t,e){},Z8b4:function(t,e){},ZOK5:function(t,e){},aqBI:function(t,e){},aumw:function(t,e){},bzzG:function(t,e){},eNhx:function(t,e){},eQLI:function(t,e){},gita:function(t,e){},iQnD:function(t,e){},it6H:function(t,e){},jCaR:function(t,e){},jCx6:function(t,e){},jwZe:function(t,e){},lFDD:function(t,e){},oUWJ:function(t,e){},p1l4:function(t,e){},pI2a:function(t,e){},"pO+c":function(t,e){},pyEn:function(t,e){},q61D:function(t,e){},qczJ:function(t,e){},qhxj:function(t,e){},s5gt:function(t,e,n){t.exports=n.p+"static/img/logo.39aabf3.png"},sDdw:function(t,e){},t8By:function(t,e){},tAiZ:function(t,e){},"tB+E":function(t,e){},tD8v:function(t,e){},tvR6:function(t,e){},tzAx:function(t,e){},uslO:function(t,e,n){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(t){return n(i(t))}function i(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(a)},s.resolve=i,t.exports=s,s.id="uslO"},v5Wd:function(t,e){},vyF8:function(t,e){},xa6X:function(t,e){},"y/rf":function(t,e){},y0Nn:function(t,e){},yWII:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a775ce576d6ca3078d44.js.map